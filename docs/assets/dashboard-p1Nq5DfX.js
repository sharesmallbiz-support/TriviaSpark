var xa=Object.defineProperty;var ya=(t,e,s)=>e in t?xa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var i=(t,e,s)=>ya(t,typeof e!="symbol"?e+"":e,s);import{j as n,u as xr,r as yr,a as br,L as F}from"./index-B_pBohjf.js";import{u as X}from"./useQuery-BYyIekjr.js";import{u as he,a as fe}from"./use-toast-Ca-k5A45.js";import{C as A,c as M,a as Q,b as U}from"./card-liGqqtMa.js";import{C as xe}from"./calendar-B5j2lato.js";import{U as ba}from"./users-zclXQIhQ.js";import{B as vr}from"./brain-D38CYG1w.js";import{S as va}from"./star-DuSMv8ef.js";import{u as Nr,L as z,I as jr}from"./label-CCdNHwP6.js";import{z as b,t as wr}from"./index-1MXcQUX6.js";import{B as j}from"./button-W1ihvLmW.js";import{T as Na,P as ja,U as wa,S as ye}from"./textarea-Bj0vuBZw.js";import{S as ee,a as te,b as se,c as ne,d as C}from"./select-Derov6E2.js";import{B as V}from"./badge-6zvk_0JI.js";import{S as Te}from"./sparkles-DIzRtzgn.js";import{c as B}from"./createLucideIcon-DivzmlIR.js";import{B as Sr}from"./building-DzjTia91.js";import{L as Sa}from"./log-out-B7heiqtq.js";import{Q as Ta}from"./qr-code-CT7Rw-gP.js";import"./utils-km2FGkQ4.js";import"./index-CvUZZ9Gq.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=B("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=B("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=B("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=B("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=B("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=B("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=B("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=B("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=B("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=B("Wine",[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]]);function _a({stats:t,isLoading:e}){if(e)return n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(r=>n.jsx(A,{className:"trivia-card animate-pulse","data-testid":`stat-loading-${r}`,children:n.jsx(M,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg mr-4"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded mb-2"}),n.jsx("div",{className:"h-4 bg-gray-100 rounded"})]})]})})},r))});const s=[{title:"Events Hosted",value:(t==null?void 0:t.totalEvents)||0,icon:xe,iconColor:"bg-wine-100 text-wine-700",testId:"stat-events"},{title:"Total Participants",value:(t==null?void 0:t.totalParticipants)||0,icon:ba,iconColor:"bg-champagne-100 text-champagne-600",testId:"stat-participants"},{title:"AI Questions Generated",value:(t==null?void 0:t.totalQuestions)||0,icon:vr,iconColor:"bg-emerald-100 text-emerald-600",testId:"stat-questions"},{title:"Avg. Rating",value:(t==null?void 0:t.averageRating)||0,icon:va,iconColor:"bg-coral-100 text-coral-500",testId:"stat-rating"}];return n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:s.map((r,a)=>{const l=r.icon;return n.jsx(A,{className:"trivia-card","data-testid":r.testId,children:n.jsx(M,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`w-12 h-12 ${r.iconColor} rounded-lg flex items-center justify-center mr-4`,children:n.jsx(l,{className:"h-6 w-6"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-gray-900","data-testid":`${r.testId}-value`,children:r.title==="Avg. Rating"?r.value.toFixed(1):r.value}),n.jsx("p",{className:"text-gray-600 text-sm","data-testid":`${r.testId}-label`,children:r.title})]})]})})},a)})})}const o=Symbol.for("drizzle:entityKind");function P(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,o))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let s=Object.getPrototypeOf(t).constructor;if(s)for(;s;){if(o in s&&s[o]===e[o])return!0;s=Object.getPrototypeOf(s)}return!1}var Fe;Fe=o;class k{constructor(e,s){i(this,"name");i(this,"keyAsName");i(this,"primary");i(this,"notNull");i(this,"default");i(this,"defaultFn");i(this,"onUpdateFn");i(this,"hasDefault");i(this,"isUnique");i(this,"uniqueName");i(this,"uniqueType");i(this,"dataType");i(this,"columnType");i(this,"enumValues");i(this,"generated");i(this,"generatedIdentity");i(this,"config");this.table=e,this.config=s,this.name=s.name,this.keyAsName=s.keyAsName,this.notNull=s.notNull,this.default=s.default,this.defaultFn=s.defaultFn,this.onUpdateFn=s.onUpdateFn,this.hasDefault=s.hasDefault,this.primary=s.primaryKey,this.isUnique=s.isUnique,this.uniqueName=s.uniqueName,this.uniqueType=s.uniqueType,this.dataType=s.dataType,this.columnType=s.columnType,this.generated=s.generated,this.generatedIdentity=s.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}i(k,Fe,"Column");var Le;Le=o;class Pr{constructor(e,s,r){i(this,"config");i(this,"$default",this.$defaultFn);i(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:s,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}i(Pr,Le,"ColumnBuilder");const K=Symbol.for("drizzle:Name");var $e;$e=o;class Ir{constructor(e,s){i(this,"reference");i(this,"_onUpdate","no action");i(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:a,foreignColumns:l}=e();return{name:r,columns:a,foreignTable:l[0].table,foreignColumns:l}},s&&(this._onUpdate=s.onUpdate,this._onDelete=s.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Dr(e,this)}}i(Ir,$e,"PgForeignKeyBuilder");var Be;Be=o;class Dr{constructor(e,s){i(this,"reference");i(this,"onUpdate");i(this,"onDelete");this.table=e,this.reference=s.reference,this.onUpdate=s._onUpdate,this.onDelete=s._onDelete}getName(){const{name:e,columns:s,foreignColumns:r}=this.reference(),a=s.map(h=>h.name),l=r.map(h=>h.name),d=[this.table[K],...a,r[0].table[K],...l];return e??`${d.join("_")}_fk`}}i(Dr,Be,"PgForeignKey");function Aa(t,...e){return t(...e)}function Ma(t,e){return`${t[K]}_${e.join("_")}_unique`}function Ie(t,e,s){for(let r=e;r<t.length;r++){const a=t[r];if(a==="\\"){r++;continue}if(a==='"')return[t.slice(e,r).replace(/\\/g,""),r+1];if(!s&&(a===","||a==="}"))return[t.slice(e,r).replace(/\\/g,""),r]}return[t.slice(e).replace(/\\/g,""),t.length]}function Cr(t,e=0){const s=[];let r=e,a=!1;for(;r<t.length;){const l=t[r];if(l===","){(a||r===e)&&s.push(""),a=!0,r++;continue}if(a=!1,l==="\\"){r+=2;continue}if(l==='"'){const[m,x]=Ie(t,r+1,!0);s.push(m),r=x;continue}if(l==="}")return[s,r+1];if(l==="{"){const[m,x]=Cr(t,r+1);s.push(m),r=x;continue}const[d,h]=Ie(t,r,!1);s.push(d),r=h}return[s,r]}function qa(t){const[e]=Cr(t,1);return e}function _r(t){return`{${t.map(e=>Array.isArray(e)?_r(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Ve,Ee;class y extends(Ee=Pr,Ve=o,Ee){constructor(){super(...arguments);i(this,"foreignKeyConfigs",[])}array(s){return new Mr(this.config.name,this,s)}references(s,r={}){return this.foreignKeyConfigs.push({ref:s,actions:r}),this}unique(s,r){return this.config.isUnique=!0,this.config.uniqueName=s,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(s){return this.config.generated={as:s,type:"always",mode:"stored"},this}buildForeignKeys(s,r){return this.foreignKeyConfigs.map(({ref:a,actions:l})=>Aa((d,h)=>{const m=new Ir(()=>{const x=d();return{columns:[s],foreignColumns:[x]}});return h.onUpdate&&m.onUpdate(h.onUpdate),h.onDelete&&m.onDelete(h.onDelete),m.build(r)},a,l))}buildExtraConfigColumn(s){return new Ar(s,this.config)}}i(y,Ve,"PgColumnBuilder");var ze,Qe;class f extends(Qe=k,ze=o,Qe){constructor(e,s){s.uniqueName||(s.uniqueName=Ma(e,[s.name])),super(e,s),this.table=e}}i(f,ze,"PgColumn");var Ue,Ge;class Ar extends(Ge=f,Ue=o,Ge){constructor(){super(...arguments);i(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});i(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(s){return this.indexConfig.opClass=s,this}}i(Ar,Ue,"ExtraConfigColumn");var Oe,Ke;class Mr extends(Ke=y,Oe=o,Ke){constructor(e,s,r){super(e,"array","PgArray"),this.config.baseBuilder=s,this.config.size=r}build(e){const s=this.config.baseBuilder.build(e);return new pe(e,this.config,s)}}i(Mr,Oe,"PgArrayBuilder");var Re,Xe;const ce=class ce extends(Xe=f,Re=o,Xe){constructor(s,r,a,l){super(s,r);i(this,"size");this.baseColumn=a,this.range=l,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(s){return typeof s=="string"&&(s=qa(s)),s.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(s,r=!1){const a=s.map(l=>l===null?null:P(this.baseColumn,ce)?this.baseColumn.mapToDriverValue(l,!0):this.baseColumn.mapToDriverValue(l));return r?a:_r(a)}};i(ce,Re,"PgArray");let pe=ce;const De=Symbol.for("drizzle:isPgEnum");function Fa(t){return!!t&&typeof t=="function"&&De in t&&t[De]===!0}var ke;ke=o;class je{constructor(e,s,r,a=!1){this._={brand:"Subquery",sql:e,selectedFields:s,alias:r,isWith:a}}}i(je,ke,"Subquery");const La={startActiveSpan(t,e){return e()}},R=Symbol.for("drizzle:ViewBaseConfig"),de=Symbol.for("drizzle:Schema"),Ce=Symbol.for("drizzle:Columns"),_e=Symbol.for("drizzle:ExtraConfigColumns"),ue=Symbol.for("drizzle:OriginalName"),me=Symbol.for("drizzle:BaseName"),ie=Symbol.for("drizzle:IsAlias"),Ae=Symbol.for("drizzle:ExtraConfigBuilder"),qr=Symbol.for("drizzle:IsDrizzleTable");var Je,He,We,Ye,Ze,et,tt,st,nt,rt;rt=o,nt=K,st=ue,tt=de,et=Ce,Ze=_e,Ye=me,We=ie,He=qr,Je=Ae;class D{constructor(e,s,r){i(this,nt);i(this,st);i(this,tt);i(this,et);i(this,Ze);i(this,Ye);i(this,We,!1);i(this,He,!0);i(this,Je);this[K]=this[ue]=e,this[de]=s,this[me]=r}}i(D,rt,"Table"),i(D,"Symbol",{Name:K,Schema:de,OriginalName:ue,Columns:Ce,ExtraConfigColumns:_e,BaseName:me,IsAlias:ie,ExtraConfigBuilder:Ae});function Fr(t){return typeof t=="object"&&t!==null&&qr in t}function $a(t){return t!=null&&typeof t.getSQL=="function"}function Ba(t){var s;const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),(s=r.typings)!=null&&s.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var it;it=o;class q{constructor(e){i(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new S([this])}}i(q,it,"StringChunk");var at;at=o;const E=class E{constructor(e){i(this,"decoder",Lr);i(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return La.startActiveSpan("drizzle.buildSQL",s=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return s==null||s.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,s){const r=Object.assign({},s,{inlineParams:s.inlineParams||this.shouldInlineParams,paramStartIndex:s.paramStartIndex||{value:0}}),{casing:a,escapeName:l,escapeParam:d,prepareTyping:h,inlineParams:m,paramStartIndex:x}=r;return Ba(e.map(c=>{var u;if(P(c,q))return{sql:c.value.join(""),params:[]};if(P(c,ae))return{sql:l(c.value),params:[]};if(c===void 0)return{sql:"",params:[]};if(Array.isArray(c)){const g=[new q("(")];for(const[v,Z]of c.entries())g.push(Z),v<c.length-1&&g.push(new q(", "));return g.push(new q(")")),this.buildQueryFromSourceParams(g,r)}if(P(c,E))return this.buildQueryFromSourceParams(c.queryChunks,{...r,inlineParams:m||c.shouldInlineParams});if(P(c,D)){const g=c[D.Symbol.Schema],v=c[D.Symbol.Name];return{sql:g===void 0||c[ie]?l(v):l(g)+"."+l(v),params:[]}}if(P(c,k)){const g=a.getColumnCasing(c);if(s.invokeSource==="indexes")return{sql:l(g),params:[]};const v=c.table[D.Symbol.Schema];return{sql:c.table[ie]||v===void 0?l(c.table[D.Symbol.Name])+"."+l(g):l(v)+"."+l(c.table[D.Symbol.Name])+"."+l(g),params:[]}}if(P(c,Vr)){const g=c[R].schema,v=c[R].name;return{sql:g===void 0||c[R].isAlias?l(v):l(g)+"."+l(v),params:[]}}if(P(c,we)){if(P(c.value,oe))return{sql:d(x.value++,c),params:[c],typings:["none"]};const g=c.value===null?null:c.encoder.mapToDriverValue(c.value);if(P(g,E))return this.buildQueryFromSourceParams([g],r);if(m)return{sql:this.mapInlineParam(g,r),params:[]};let v=["none"];return h&&(v=[h(c.encoder)]),{sql:d(x.value++,g),params:[g],typings:v}}return P(c,oe)?{sql:d(x.value++,c),params:[c],typings:["none"]}:P(c,E.Aliased)&&c.fieldAlias!==void 0?{sql:l(c.fieldAlias),params:[]}:P(c,je)?c._.isWith?{sql:l(c._.alias),params:[]}:this.buildQueryFromSourceParams([new q("("),c._.sql,new q(") "),new ae(c._.alias)],r):Fa(c)?c.schema?{sql:l(c.schema)+"."+l(c.enumName),params:[]}:{sql:l(c.enumName),params:[]}:$a(c)?(u=c.shouldOmitSQLParens)!=null&&u.call(c)?this.buildQueryFromSourceParams([c.getSQL()],r):this.buildQueryFromSourceParams([new q("("),c.getSQL(),new q(")")],r):m?{sql:this.mapInlineParam(c,r),params:[]}:{sql:d(x.value++,c),params:[c],typings:["none"]}}))}mapInlineParam(e,{escapeString:s}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return s(e);if(typeof e=="object"){const r=e.toString();return s(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new E.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};i(E,at,"SQL");let S=E;var ot;ot=o;class ae{constructor(e){i(this,"brand");this.value=e}getSQL(){return new S([this])}}i(ae,ot,"Name");const Lr={mapFromDriverValue:t=>t},$r={mapToDriverValue:t=>t};({...Lr,...$r});var lt;lt=o;class we{constructor(e,s=$r){i(this,"brand");this.value=e,this.encoder=s}getSQL(){return new S([this])}}i(we,lt,"Param");function $(t,...e){const s=[];(e.length>0||t.length>0&&t[0]!=="")&&s.push(new q(t[0]));for(const[r,a]of e.entries())s.push(a,new q(t[r+1]));return new S(s)}(t=>{function e(){return new S([])}t.empty=e;function s(m){return new S(m)}t.fromList=s;function r(m){return new S([new q(m)])}t.raw=r;function a(m,x){const c=[];for(const[u,g]of m.entries())u>0&&x!==void 0&&c.push(x),c.push(g);return new S(c)}t.join=a;function l(m){return new ae(m)}t.identifier=l;function d(m){return new oe(m)}t.placeholder=d;function h(m,x){return new we(m,x)}t.param=h})($||($={}));(t=>{var s;s=o;const r=class r{constructor(l,d){i(this,"isSelectionField",!1);this.sql=l,this.fieldAlias=d}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};i(r,s,"SQL.Aliased");let e=r;t.Aliased=e})(S||(S={}));var ct;ct=o;class oe{constructor(e){this.name=e}getSQL(){return new S([this])}}i(oe,ct,"Placeholder");const Br=Symbol.for("drizzle:IsDrizzleView");var dt,ut,mt;mt=o,ut=R,dt=Br;class Vr{constructor({name:e,schema:s,selectedFields:r,query:a}){i(this,ut);i(this,dt,!0);this[R]={name:e,originalName:e,schema:s,selectedFields:r,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new S([this])}}i(Vr,mt,"View");function Va(t){return typeof t=="object"&&t!==null&&Br in t}k.prototype.getSQL=function(){return new S([this])};D.prototype.getSQL=function(){return new S([this])};je.prototype.getSQL=function(){return new S([this])};function Ea(t){return t[D.Symbol.Columns]}function za(t){return t[R].selectedFields}function T(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var pt,gt;class W extends(gt=y,pt=o,gt){generatedAlwaysAsIdentity(e){if(e){const{name:s,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:s,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:s,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:s,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}i(W,pt,"PgIntColumnBaseBuilder");var ht,ft;class Er extends(ft=W,ht=o,ft){constructor(e){super(e,"number","PgBigInt53")}build(e){return new zr(e,this.config)}}i(Er,ht,"PgBigInt53Builder");var xt,yt;class zr extends(yt=f,xt=o,yt){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}i(zr,xt,"PgBigInt53");var bt,vt;class Qr extends(vt=W,bt=o,vt){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Ur(e,this.config)}}i(Qr,bt,"PgBigInt64Builder");var Nt,jt;class Ur extends(jt=f,Nt=o,jt){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}i(Ur,Nt,"PgBigInt64");function Qa(t,e){const{name:s,config:r}=T(t,e);return r.mode==="number"?new Er(s):new Qr(s)}var wt,St;class Gr extends(St=y,wt=o,St){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Or(e,this.config)}}i(Gr,wt,"PgBigSerial53Builder");var Tt,Pt;class Or extends(Pt=f,Tt=o,Pt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}i(Or,Tt,"PgBigSerial53");var It,Dt;class Kr extends(Dt=y,It=o,Dt){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Rr(e,this.config)}}i(Kr,It,"PgBigSerial64Builder");var Ct,_t;class Rr extends(_t=f,Ct=o,_t){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}i(Rr,Ct,"PgBigSerial64");function Ua(t,e){const{name:s,config:r}=T(t,e);return r.mode==="number"?new Gr(s):new Kr(s)}var At,Mt;class Xr extends(Mt=y,At=o,Mt){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new kr(e,this.config)}}i(Xr,At,"PgBooleanBuilder");var qt,Ft;class kr extends(Ft=f,qt=o,Ft){getSQLType(){return"boolean"}}i(kr,qt,"PgBoolean");function J(t){return new Xr(t??"")}var Lt,$t;class Jr extends($t=y,Lt=o,$t){constructor(e,s){super(e,"string","PgChar"),this.config.length=s.length,this.config.enumValues=s.enum}build(e){return new Hr(e,this.config)}}i(Jr,Lt,"PgCharBuilder");var Bt,Vt;class Hr extends(Vt=f,Bt=o,Vt){constructor(){super(...arguments);i(this,"length",this.config.length);i(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}i(Hr,Bt,"PgChar");function Ga(t,e={}){const{name:s,config:r}=T(t,e);return new Jr(s,r)}var Et,zt;class Wr extends(zt=y,Et=o,zt){constructor(e){super(e,"string","PgCidr")}build(e){return new Yr(e,this.config)}}i(Wr,Et,"PgCidrBuilder");var Qt,Ut;class Yr extends(Ut=f,Qt=o,Ut){getSQLType(){return"cidr"}}i(Yr,Qt,"PgCidr");function Oa(t){return new Wr(t??"")}var Gt,Ot;class Zr extends(Ot=y,Gt=o,Ot){constructor(e,s,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=s,this.config.customTypeParams=r}build(e){return new ei(e,this.config)}}i(Zr,Gt,"PgCustomColumnBuilder");var Kt,Rt;class ei extends(Rt=f,Kt=o,Rt){constructor(s,r){super(s,r);i(this,"sqlName");i(this,"mapTo");i(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(s){return typeof this.mapFrom=="function"?this.mapFrom(s):s}mapToDriverValue(s){return typeof this.mapTo=="function"?this.mapTo(s):s}}i(ei,Kt,"PgCustomColumn");function Ka(t){return(e,s)=>{const{name:r,config:a}=T(e,s);return new Zr(r,a,t)}}var Xt,kt;class H extends(kt=y,Xt=o,kt){defaultNow(){return this.default($`now()`)}}i(H,Xt,"PgDateColumnBaseBuilder");var Jt,Ht;class ti extends(Ht=H,Jt=o,Ht){constructor(e){super(e,"date","PgDate")}build(e){return new si(e,this.config)}}i(ti,Jt,"PgDateBuilder");var Wt,Yt;class si extends(Yt=f,Wt=o,Yt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}i(si,Wt,"PgDate");var Zt,es;class ni extends(es=H,Zt=o,es){constructor(e){super(e,"string","PgDateString")}build(e){return new ri(e,this.config)}}i(ni,Zt,"PgDateStringBuilder");var ts,ss;class ri extends(ss=f,ts=o,ss){getSQLType(){return"date"}}i(ri,ts,"PgDateString");function Ra(t,e){const{name:s,config:r}=T(t,e);return(r==null?void 0:r.mode)==="date"?new ti(s):new ni(s)}var ns,rs;class ii extends(rs=y,ns=o,rs){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new ai(e,this.config)}}i(ii,ns,"PgDoublePrecisionBuilder");var is,as;class ai extends(as=f,is=o,as){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}i(ai,is,"PgDoublePrecision");function Xa(t){return new ii(t??"")}var os,ls;class oi extends(ls=y,os=o,ls){constructor(e){super(e,"string","PgInet")}build(e){return new li(e,this.config)}}i(oi,os,"PgInetBuilder");var cs,ds;class li extends(ds=f,cs=o,ds){getSQLType(){return"inet"}}i(li,cs,"PgInet");function ka(t){return new oi(t??"")}var us,ms;class ci extends(ms=W,us=o,ms){constructor(e){super(e,"number","PgInteger")}build(e){return new di(e,this.config)}}i(ci,us,"PgIntegerBuilder");var ps,gs;class di extends(gs=f,ps=o,gs){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}i(di,ps,"PgInteger");function L(t){return new ci(t??"")}var hs,fs;class ui extends(fs=y,hs=o,fs){constructor(e,s){super(e,"string","PgInterval"),this.config.intervalConfig=s}build(e){return new mi(e,this.config)}}i(ui,hs,"PgIntervalBuilder");var xs,ys;class mi extends(ys=f,xs=o,ys){constructor(){super(...arguments);i(this,"fields",this.config.intervalConfig.fields);i(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const s=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${s}${r}`}}i(mi,xs,"PgInterval");function Ja(t,e={}){const{name:s,config:r}=T(t,e);return new ui(s,r)}var bs,vs;class pi extends(vs=y,bs=o,vs){constructor(e){super(e,"json","PgJson")}build(e){return new gi(e,this.config)}}i(pi,bs,"PgJsonBuilder");var Ns,js;class gi extends(js=f,Ns=o,js){constructor(e,s){super(e,s)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}i(gi,Ns,"PgJson");function Se(t){return new pi(t??"")}var ws,Ss;class hi extends(Ss=y,ws=o,Ss){constructor(e){super(e,"json","PgJsonb")}build(e){return new fi(e,this.config)}}i(hi,ws,"PgJsonbBuilder");var Ts,Ps;class fi extends(Ps=f,Ts=o,Ps){constructor(e,s){super(e,s)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}i(fi,Ts,"PgJsonb");function Ha(t){return new hi(t??"")}var Is,Ds;class xi extends(Ds=y,Is=o,Ds){constructor(e){super(e,"array","PgLine")}build(e){return new yi(e,this.config)}}i(xi,Is,"PgLineBuilder");var Cs,_s;class yi extends(_s=f,Cs=o,_s){getSQLType(){return"line"}mapFromDriverValue(e){const[s,r,a]=e.slice(1,-1).split(",");return[Number.parseFloat(s),Number.parseFloat(r),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}i(yi,Cs,"PgLine");var As,Ms;class bi extends(Ms=y,As=o,Ms){constructor(e){super(e,"json","PgLineABC")}build(e){return new vi(e,this.config)}}i(bi,As,"PgLineABCBuilder");var qs,Fs;class vi extends(Fs=f,qs=o,Fs){getSQLType(){return"line"}mapFromDriverValue(e){const[s,r,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(s),b:Number.parseFloat(r),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}i(vi,qs,"PgLineABC");function Wa(t,e){const{name:s,config:r}=T(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new xi(s):new bi(s)}var Ls,$s;class Ni extends($s=y,Ls=o,$s){constructor(e){super(e,"string","PgMacaddr")}build(e){return new ji(e,this.config)}}i(Ni,Ls,"PgMacaddrBuilder");var Bs,Vs;class ji extends(Vs=f,Bs=o,Vs){getSQLType(){return"macaddr"}}i(ji,Bs,"PgMacaddr");function Ya(t){return new Ni(t??"")}var Es,zs;class wi extends(zs=y,Es=o,zs){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Si(e,this.config)}}i(wi,Es,"PgMacaddr8Builder");var Qs,Us;class Si extends(Us=f,Qs=o,Us){getSQLType(){return"macaddr8"}}i(Si,Qs,"PgMacaddr8");function Za(t){return new wi(t??"")}var Gs,Os;class Ti extends(Os=y,Gs=o,Os){constructor(e,s,r){super(e,"string","PgNumeric"),this.config.precision=s,this.config.scale=r}build(e){return new Pi(e,this.config)}}i(Ti,Gs,"PgNumericBuilder");var Ks,Rs;class Pi extends(Rs=f,Ks=o,Rs){constructor(s,r){super(s,r);i(this,"precision");i(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}i(Pi,Ks,"PgNumeric");function eo(t,e){const{name:s,config:r}=T(t,e);return new Ti(s,r==null?void 0:r.precision,r==null?void 0:r.scale)}var Xs,ks;class Ii extends(ks=y,Xs=o,ks){constructor(e){super(e,"array","PgPointTuple")}build(e){return new Di(e,this.config)}}i(Ii,Xs,"PgPointTupleBuilder");var Js,Hs;class Di extends(Hs=f,Js=o,Hs){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[s,r]=e.slice(1,-1).split(",");return[Number.parseFloat(s),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}i(Di,Js,"PgPointTuple");var Ws,Ys;class Ci extends(Ys=y,Ws=o,Ys){constructor(e){super(e,"json","PgPointObject")}build(e){return new _i(e,this.config)}}i(Ci,Ws,"PgPointObjectBuilder");var Zs,en;class _i extends(en=f,Zs=o,en){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[s,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(s),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}i(_i,Zs,"PgPointObject");function to(t,e){const{name:s,config:r}=T(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new Ii(s):new Ci(s)}function so(t){const e=[];for(let s=0;s<t.length;s+=2)e.push(Number.parseInt(t.slice(s,s+2),16));return new Uint8Array(e)}function Me(t,e){const s=new ArrayBuffer(8),r=new DataView(s);for(let a=0;a<8;a++)r.setUint8(a,t[e+a]);return r.getFloat64(0,!0)}function Ai(t){const e=so(t);let s=0;const r=e[s];s+=1;const a=new DataView(e.buffer),l=a.getUint32(s,r===1);if(s+=4,l&536870912&&(a.getUint32(s,r===1),s+=4),(l&65535)===1){const d=Me(e,s);s+=8;const h=Me(e,s);return s+=8,[d,h]}throw new Error("Unsupported geometry type")}var tn,sn;class Mi extends(sn=y,tn=o,sn){constructor(e){super(e,"array","PgGeometry")}build(e){return new qi(e,this.config)}}i(Mi,tn,"PgGeometryBuilder");var nn,rn;class qi extends(rn=f,nn=o,rn){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return Ai(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}i(qi,nn,"PgGeometry");var an,on;class Fi extends(on=y,an=o,on){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Li(e,this.config)}}i(Fi,an,"PgGeometryObjectBuilder");var ln,cn;class Li extends(cn=f,ln=o,cn){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const s=Ai(e);return{x:s[0],y:s[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}i(Li,ln,"PgGeometryObject");function no(t,e){const{name:s,config:r}=T(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new Mi(s):new Fi(s)}var dn,un;class $i extends(un=y,dn=o,un){constructor(e,s){super(e,"number","PgReal"),this.config.length=s}build(e){return new Bi(e,this.config)}}i($i,dn,"PgRealBuilder");var mn,pn;class Bi extends(pn=f,mn=o,pn){constructor(s,r){super(s,r);i(this,"mapFromDriverValue",s=>typeof s=="string"?Number.parseFloat(s):s)}getSQLType(){return"real"}}i(Bi,mn,"PgReal");function ro(t){return new $i(t??"")}var gn,hn;class Vi extends(hn=y,gn=o,hn){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ei(e,this.config)}}i(Vi,gn,"PgSerialBuilder");var fn,xn;class Ei extends(xn=f,fn=o,xn){getSQLType(){return"serial"}}i(Ei,fn,"PgSerial");function io(t){return new Vi(t??"")}var yn,bn;class zi extends(bn=W,yn=o,bn){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Qi(e,this.config)}}i(zi,yn,"PgSmallIntBuilder");var vn,Nn;class Qi extends(Nn=f,vn=o,Nn){constructor(){super(...arguments);i(this,"mapFromDriverValue",s=>typeof s=="string"?Number(s):s)}getSQLType(){return"smallint"}}i(Qi,vn,"PgSmallInt");function ao(t){return new zi(t??"")}var jn,wn;class Ui extends(wn=y,jn=o,wn){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Gi(e,this.config)}}i(Ui,jn,"PgSmallSerialBuilder");var Sn,Tn;class Gi extends(Tn=f,Sn=o,Tn){getSQLType(){return"smallserial"}}i(Gi,Sn,"PgSmallSerial");function oo(t){return new Ui(t??"")}var Pn,In;class Oi extends(In=y,Pn=o,In){constructor(e,s){super(e,"string","PgText"),this.config.enumValues=s.enum}build(e){return new Ki(e,this.config)}}i(Oi,Pn,"PgTextBuilder");var Dn,Cn;class Ki extends(Cn=f,Dn=o,Cn){constructor(){super(...arguments);i(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}i(Ki,Dn,"PgText");function p(t,e={}){const{name:s,config:r}=T(t,e);return new Oi(s,r)}var _n,An;class Ri extends(An=H,_n=o,An){constructor(e,s,r){super(e,"string","PgTime"),this.withTimezone=s,this.precision=r,this.config.withTimezone=s,this.config.precision=r}build(e){return new Xi(e,this.config)}}i(Ri,_n,"PgTimeBuilder");var Mn,qn;class Xi extends(qn=f,Mn=o,qn){constructor(s,r){super(s,r);i(this,"withTimezone");i(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Xi,Mn,"PgTime");function lo(t,e={}){const{name:s,config:r}=T(t,e);return new Ri(s,r.withTimezone??!1,r.precision)}var Fn,Ln;class ki extends(Ln=H,Fn=o,Ln){constructor(e,s,r){super(e,"date","PgTimestamp"),this.config.withTimezone=s,this.config.precision=r}build(e){return new Ji(e,this.config)}}i(ki,Fn,"PgTimestampBuilder");var $n,Bn;class Ji extends(Bn=f,$n=o,Bn){constructor(s,r){super(s,r);i(this,"withTimezone");i(this,"precision");i(this,"mapFromDriverValue",s=>new Date(this.withTimezone?s:s+"+0000"));i(this,"mapToDriverValue",s=>s.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Ji,$n,"PgTimestamp");var Vn,En;class Hi extends(En=H,Vn=o,En){constructor(e,s,r){super(e,"string","PgTimestampString"),this.config.withTimezone=s,this.config.precision=r}build(e){return new Wi(e,this.config)}}i(Hi,Vn,"PgTimestampStringBuilder");var zn,Qn;class Wi extends(Qn=f,zn=o,Qn){constructor(s,r){super(s,r);i(this,"withTimezone");i(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Wi,zn,"PgTimestampString");function _(t,e={}){const{name:s,config:r}=T(t,e);return(r==null?void 0:r.mode)==="string"?new Hi(s,r.withTimezone??!1,r.precision):new ki(s,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var Un,Gn;class Yi extends(Gn=y,Un=o,Gn){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default($`gen_random_uuid()`)}build(e){return new Zi(e,this.config)}}i(Yi,Un,"PgUUIDBuilder");var On,Kn;class Zi extends(Kn=f,On=o,Kn){getSQLType(){return"uuid"}}i(Zi,On,"PgUUID");function co(t){return new Yi(t??"")}var Rn,Xn;class ea extends(Xn=y,Rn=o,Xn){constructor(e,s){super(e,"string","PgVarchar"),this.config.length=s.length,this.config.enumValues=s.enum}build(e){return new ta(e,this.config)}}i(ea,Rn,"PgVarcharBuilder");var kn,Jn;class ta extends(Jn=f,kn=o,Jn){constructor(){super(...arguments);i(this,"length",this.config.length);i(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}i(ta,kn,"PgVarchar");function I(t,e={}){const{name:s,config:r}=T(t,e);return new ea(s,r)}var Hn,Wn;class sa extends(Wn=y,Hn=o,Wn){constructor(e,s){super(e,"string","PgBinaryVector"),this.config.dimensions=s.dimensions}build(e){return new na(e,this.config)}}i(sa,Hn,"PgBinaryVectorBuilder");var Yn,Zn;class na extends(Zn=f,Yn=o,Zn){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}i(na,Yn,"PgBinaryVector");function uo(t,e){const{name:s,config:r}=T(t,e);return new sa(s,r)}var er,tr;class ra extends(tr=y,er=o,tr){constructor(e,s){super(e,"array","PgHalfVector"),this.config.dimensions=s.dimensions}build(e){return new ia(e,this.config)}}i(ra,er,"PgHalfVectorBuilder");var sr,nr;class ia extends(nr=f,sr=o,nr){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){return s.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}i(ia,sr,"PgHalfVector");function mo(t,e){const{name:s,config:r}=T(t,e);return new ra(s,r)}var rr,ir;class aa extends(ir=y,rr=o,ir){constructor(e,s){super(e,"string","PgSparseVector"),this.config.dimensions=s.dimensions}build(e){return new oa(e,this.config)}}i(aa,rr,"PgSparseVectorBuilder");var ar,or;class oa extends(or=f,ar=o,or){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}i(oa,ar,"PgSparseVector");function po(t,e){const{name:s,config:r}=T(t,e);return new aa(s,r)}var lr,cr;class la extends(cr=y,lr=o,cr){constructor(e,s){super(e,"array","PgVector"),this.config.dimensions=s.dimensions}build(e){return new ca(e,this.config)}}i(la,lr,"PgVectorBuilder");var dr,ur;class ca extends(ur=f,dr=o,ur){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){return s.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}i(ca,dr,"PgVector");function go(t,e){const{name:s,config:r}=T(t,e);return new la(s,r)}function ho(){return{bigint:Qa,bigserial:Ua,boolean:J,char:Ga,cidr:Oa,customType:Ka,date:Ra,doublePrecision:Xa,inet:ka,integer:L,interval:Ja,json:Se,jsonb:Ha,line:Wa,macaddr:Ya,macaddr8:Za,numeric:eo,point:to,geometry:no,real:ro,serial:io,smallint:ao,smallserial:oo,text:p,time:lo,timestamp:_,uuid:co,varchar:I,bit:uo,halfvec:mo,sparsevec:po,vector:go}}const ge=Symbol.for("drizzle:PgInlineForeignKeys"),qe=Symbol.for("drizzle:EnableRLS");var mr,pr,gr,hr,fr;class le extends(fr=D,hr=o,gr=ge,pr=qe,mr=D.Symbol.ExtraConfigBuilder,fr){constructor(){super(...arguments);i(this,gr,[]);i(this,pr,!1);i(this,mr)}}i(le,hr,"PgTable"),i(le,"Symbol",Object.assign({},D.Symbol,{InlineForeignKeys:ge,EnableRLS:qe}));function fo(t,e,s,r,a=t){const l=new le(t,r,a),d=typeof e=="function"?e(ho()):e,h=Object.fromEntries(Object.entries(d).map(([c,u])=>{const g=u;g.setName(c);const v=g.build(l);return l[ge].push(...g.buildForeignKeys(v,l)),[c,v]})),m=Object.fromEntries(Object.entries(d).map(([c,u])=>{const g=u;g.setName(c);const v=g.buildExtraConfigColumn(l);return[c,v]})),x=Object.assign(l,h);return x[D.Symbol.Columns]=h,x[D.Symbol.ExtraConfigColumns]=m,Object.assign(x,{enableRLS:()=>(x[le.Symbol.EnableRLS]=!0,x)})}const G=(t,e,s)=>fo(t,e,s,void 0),N={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function w(t,e){return e.includes(t.columnType)}function xo(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const yo=b.union([b.string(),b.number(),b.boolean(),b.null()]),bo=b.union([yo,b.record(b.any()),b.array(b.any())]),vo=b.custom(t=>t instanceof Buffer);function da(t,e){const s=(e==null?void 0:e.zodInstance)??b,r=(e==null?void 0:e.coerce)??{};let a;return xo(t)&&(a=t.enumValues.length?s.enum(t.enumValues):s.string()),a||(w(t,["PgGeometry","PgPointTuple"])?a=s.tuple([s.number(),s.number()]):w(t,["PgGeometryObject","PgPointObject"])?a=s.object({x:s.number(),y:s.number()}):w(t,["PgHalfVector","PgVector"])?(a=s.array(s.number()),a=t.dimensions?a.length(t.dimensions):a):w(t,["PgLine"])?a=s.tuple([s.number(),s.number(),s.number()]):w(t,["PgLineABC"])?a=s.object({a:s.number(),b:s.number(),c:s.number()}):w(t,["PgArray"])?(a=s.array(da(t.baseColumn,s)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=s.array(s.any()):t.dataType==="number"?a=No(t,s,r):t.dataType==="bigint"?a=jo(t,s,r):t.dataType==="boolean"?a=r===!0||r.boolean?s.coerce.boolean():s.boolean():t.dataType==="date"?a=r===!0||r.date?s.coerce.date():s.date():t.dataType==="string"?a=wo(t,s,r):t.dataType==="json"?a=bo:t.dataType==="custom"?a=s.any():t.dataType==="buffer"&&(a=vo)),a||(a=s.any()),a}function No(t,e,s){let r=t.getSQLType().includes("unsigned"),a,l,d=!1;w(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=r?0:N.INT8_MIN,l=r?N.INT8_UNSIGNED_MAX:N.INT8_MAX,d=!0):w(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=r?0:N.INT16_MIN,l=r?N.INT16_UNSIGNED_MAX:N.INT16_MAX,d=!0):w(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=r?0:N.INT24_MIN,l=r?N.INT24_UNSIGNED_MAX:N.INT24_MAX,d=w(t,["MySqlMediumInt","SingleStoreMediumInt"])):w(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=r?0:N.INT32_MIN,l=r?N.INT32_UNSIGNED_MAX:N.INT32_MAX,d=!0):w(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=r?0:N.INT48_MIN,l=r?N.INT48_UNSIGNED_MAX:N.INT48_MAX):w(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||w(t,["MySqlSerial","SingleStoreSerial"]),a=r?0:Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER,d=!0):w(t,["MySqlYear","SingleStoreYear"])?(a=1901,l=2155,d=!0):(a=Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER);let h=s===!0||s!=null&&s.number?e.coerce.number():e.number();return h=h.min(a).max(l),d?h.int():h}function jo(t,e,s){const r=t.getSQLType().includes("unsigned"),a=r?0n:N.INT64_MIN,l=r?N.INT64_UNSIGNED_MAX:N.INT64_MAX;return(s===!0||s!=null&&s.bigint?e.coerce.bigint():e.bigint()).min(a).max(l)}function wo(t,e,s){if(w(t,["PgUUID"]))return e.string().uuid();let r,a,l=!1;w(t,["PgVarchar","SQLiteText"])?r=t.length:w(t,["MySqlVarChar","SingleStoreVarChar"])?r=t.length??N.INT16_UNSIGNED_MAX:w(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?r=N.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?r=N.INT24_UNSIGNED_MAX:t.textType==="text"?r=N.INT16_UNSIGNED_MAX:r=N.INT8_UNSIGNED_MAX),w(t,["PgChar","MySqlChar","SingleStoreChar"])&&(r=t.length,l=!0),w(t,["PgBinaryVector"])&&(a=/^[01]+$/,r=t.dimensions);let d=s===!0||s!=null&&s.string?e.coerce.string():e.string();return d=a?d.regex(a):d,r&&l?d.length(r):r?d.max(r):d}function ua(t){return Fr(t)?Ea(t):za(t)}function ma(t,e,s,r){const a={};for(const[l,d]of Object.entries(t)){if(!P(d,k)&&!P(d,S)&&!P(d,S.Aliased)&&typeof d=="object"){const u=Fr(d)||Va(d)?ua(d):d;a[l]=ma(u,e[l]??{},s,r);continue}const h=e[l];if(h!==void 0&&typeof h!="function"){a[l]=h;continue}const m=P(d,k)?d:void 0,x=m?da(m,r):b.any(),c=typeof h=="function"?h(x):x;s.never(m)||(a[l]=c,m&&(s.nullable(m)&&(a[l]=a[l].nullable()),s.optional(m)&&(a[l]=a[l].optional())))}return b.object(a)}const So={never:t=>{var e,s;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((s=t==null?void 0:t.generatedIdentity)==null?void 0:s.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},O=(t,e)=>{const s=ua(t);return ma(s,{},So)},pa=G("users",{id:I("id").primaryKey().default($`gen_random_uuid()`),username:p("username").notNull().unique(),email:p("email").notNull().unique(),password:p("password").notNull(),fullName:p("full_name").notNull(),createdAt:_("created_at").defaultNow().notNull()}),Y=G("events",{id:I("id").primaryKey().default($`gen_random_uuid()`),title:p("title").notNull(),description:p("description"),hostId:I("host_id").notNull().references(()=>pa.id),eventType:p("event_type").notNull(),maxParticipants:L("max_participants").default(50),difficulty:p("difficulty").default("mixed"),status:p("status").default("draft"),qrCode:p("qr_code"),eventDate:_("event_date"),eventTime:p("event_time"),location:p("location"),sponsoringOrganization:p("sponsoring_organization"),logoUrl:p("logo_url"),backgroundImageUrl:p("background_image_url"),eventCopy:p("event_copy"),welcomeMessage:p("welcome_message"),thankYouMessage:p("thank_you_message"),primaryColor:p("primary_color").default("#7C2D12"),secondaryColor:p("secondary_color").default("#FEF3C7"),fontFamily:p("font_family").default("Inter"),contactEmail:p("contact_email"),contactPhone:p("contact_phone"),websiteUrl:p("website_url"),socialLinks:p("social_links"),prizeInformation:p("prize_information"),eventRules:p("event_rules"),specialInstructions:p("special_instructions"),accessibilityInfo:p("accessibility_info"),dietaryAccommodations:p("dietary_accommodations"),dressCode:p("dress_code"),ageRestrictions:p("age_restrictions"),technicalRequirements:p("technical_requirements"),registrationDeadline:_("registration_deadline"),cancellationPolicy:p("cancellation_policy"),refundPolicy:p("refund_policy"),sponsorInformation:p("sponsor_information"),settings:Se("settings").default({}),createdAt:_("created_at").defaultNow().notNull(),startedAt:_("started_at"),completedAt:_("completed_at")}),ga=G("questions",{id:I("id").primaryKey().default($`gen_random_uuid()`),eventId:I("event_id").notNull().references(()=>Y.id),type:p("type").notNull(),question:p("question").notNull(),options:Se("options").default([]),correctAnswer:p("correct_answer").notNull(),points:L("points").default(100),timeLimit:L("time_limit").default(30),difficulty:p("difficulty").default("medium"),category:p("category"),backgroundImageUrl:p("background_image_url"),aiGenerated:J("ai_generated").default(!1),orderIndex:L("order_index").default(0),createdAt:_("created_at").defaultNow().notNull()}),ha=G("teams",{id:I("id").primaryKey().default($`gen_random_uuid()`),eventId:I("event_id").notNull().references(()=>Y.id),name:p("name").notNull(),tableNumber:L("table_number"),maxMembers:L("max_members").default(6),createdAt:_("created_at").defaultNow().notNull()}),fa=G("participants",{id:I("id").primaryKey().default($`gen_random_uuid()`),eventId:I("event_id").notNull().references(()=>Y.id),teamId:I("team_id").references(()=>ha.id),name:p("name").notNull(),participantToken:I("participant_token").notNull().unique(),joinedAt:_("joined_at").defaultNow().notNull(),lastActiveAt:_("last_active_at").defaultNow().notNull(),isActive:J("is_active").default(!0),canSwitchTeam:J("can_switch_team").default(!0)}),To=G("responses",{id:I("id").primaryKey().default($`gen_random_uuid()`),participantId:I("participant_id").notNull().references(()=>fa.id),questionId:I("question_id").notNull().references(()=>ga.id),answer:p("answer").notNull(),isCorrect:J("is_correct").notNull(),points:L("points").default(0),responseTime:L("response_time"),timeRemaining:L("time_remaining"),submittedAt:_("submitted_at").defaultNow().notNull()}),Po=G("fun_facts",{id:I("id").primaryKey().default($`gen_random_uuid()`),eventId:I("event_id").notNull().references(()=>Y.id),title:p("title").notNull(),content:p("content").notNull(),orderIndex:L("order_index").default(0),isActive:J("is_active").default(!0),createdAt:_("created_at").defaultNow().notNull()});O(pa).omit({id:!0,createdAt:!0});O(Y).omit({id:!0,createdAt:!0,startedAt:!0,completedAt:!0,qrCode:!0});O(ga).omit({id:!0,createdAt:!0});O(ha).omit({id:!0,createdAt:!0});O(fa).omit({id:!0,joinedAt:!0,lastActiveAt:!0,participantToken:!0});O(To).omit({id:!0,submittedAt:!0});O(Po).omit({id:!0,createdAt:!0});const Io=b.object({description:b.string().min(10,"Description must be at least 10 characters"),eventType:b.enum(["wine_dinner","corporate","party","educational","fundraiser"]),participants:b.number().min(1).max(500),difficulty:b.enum(["easy","medium","hard","mixed"])}),Do=b.object({eventId:b.string().min(1,"Event ID is required"),topic:b.string().min(1,"Topic is required"),type:b.enum(["multiple_choice","true_false","fill_blank","image"]),difficulty:b.enum(["easy","medium","hard"]).optional(),category:b.string().optional(),count:b.number().min(1).max(20).default(1)});function Co(){const{toast:t}=he(),[,e]=xr(),[s,r]=yr.useState(null),{register:a,handleSubmit:l,setValue:d,watch:h,formState:{errors:m}}=Nr({resolver:wr(Io),defaultValues:{eventType:"wine_dinner",participants:30,difficulty:"mixed"}}),x=fe({mutationFn:async u=>{const g=await fetch("/api/events/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!g.ok){const v=await g.json();throw new Error(v.error||"Failed to generate event")}return g.json()},onSuccess:u=>{r(u),t({title:"Event Generated Successfully!",description:`Created "${u.event.title}" with ${u.questions.length} AI-powered questions.`})},onError:u=>{t({title:"Generation Failed",description:u.message,variant:"destructive"})}}),c=u=>{x.mutate(u)};return s?n.jsxs(A,{className:"trivia-card overflow-hidden","data-testid":"card-generated-event",children:[n.jsx("div",{className:"wine-gradient px-6 py-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Te,{className:"text-champagne-400 text-xl mr-3"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-white","data-testid":"text-generated-title",children:"Event Generated Successfully!"}),n.jsx("p",{className:"text-champagne-200 text-sm","data-testid":"text-generated-subtitle",children:"Your AI-powered trivia event is ready"})]})]})}),n.jsx(M,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2","data-testid":"text-event-title",children:s.event.title}),n.jsx("p",{className:"text-gray-600 text-sm","data-testid":"text-event-description",children:s.event.description})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.event.eventDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Date"}),n.jsx("p",{className:"font-medium","data-testid":"text-event-date",children:new Date(s.event.eventDate).toLocaleDateString()})]}),s.event.eventTime&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Time"}),n.jsx("p",{className:"font-medium","data-testid":"text-event-time",children:s.event.eventTime})]}),s.event.location&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Location"}),n.jsx("p",{className:"font-medium","data-testid":"text-event-location",children:s.event.location})]}),s.event.sponsoringOrganization&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Sponsor"}),n.jsx("p",{className:"font-medium","data-testid":"text-event-sponsor",children:s.event.sponsoringOrganization})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(V,{variant:"secondary","data-testid":"badge-event-type",children:s.event.eventType.replace("_"," ")}),n.jsx(V,{variant:"outline","data-testid":"badge-difficulty",children:s.event.difficulty}),n.jsxs(V,{variant:"default","data-testid":"badge-question-count",children:[s.questions.length," Questions"]}),n.jsx(V,{variant:"default",className:"bg-emerald-100 text-emerald-800","data-testid":"badge-status",children:"Active"})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx(j,{onClick:()=>e(`/event/${s.event.id}`),className:"flex-1 trivia-button-primary","data-testid":"button-manage-event",children:"Manage Event"}),n.jsx(j,{onClick:()=>r(null),variant:"outline","data-testid":"button-generate-another",children:"Generate Another"})]})]})})]}):n.jsxs(A,{className:"trivia-card overflow-hidden","data-testid":"card-event-generator",children:[n.jsx("div",{className:"wine-gradient px-6 py-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ca,{className:"text-champagne-400 text-xl mr-3"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-white","data-testid":"text-generator-title",children:"AI Event Generator"}),n.jsx("p",{className:"text-champagne-200 text-sm","data-testid":"text-generator-subtitle",children:"Describe your event and let AI create the perfect trivia experience"})]})]})}),n.jsx(M,{className:"p-6",children:n.jsxs("form",{onSubmit:l(c),className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(z,{htmlFor:"description","data-testid":"label-description",children:"Describe Your Event"}),n.jsx(Na,{id:"description",...a("description"),rows:3,placeholder:"Create a sophisticated wine dinner trivia for 30 guests featuring French Bordeaux wines with medium difficulty questions about wine regions, tasting notes, and vineyard history...",className:`resize-none ${m.description?"border-red-500":"focus:ring-2 focus:ring-wine-500 focus:border-transparent"}`,"data-testid":"textarea-description"}),m.description&&n.jsx("p",{className:"text-sm text-red-500 mt-1","data-testid":"error-description",children:m.description.message})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx(z,{htmlFor:"eventType","data-testid":"label-event-type",children:"Event Type"}),n.jsxs(ee,{onValueChange:u=>d("eventType",u),defaultValue:"wine_dinner",children:[n.jsx(te,{"data-testid":"select-event-type",children:n.jsx(se,{})}),n.jsxs(ne,{children:[n.jsx(C,{value:"wine_dinner",children:"Wine Dinner"}),n.jsx(C,{value:"corporate",children:"Corporate Event"}),n.jsx(C,{value:"party",children:"Private Party"}),n.jsx(C,{value:"educational",children:"Educational"}),n.jsx(C,{value:"fundraiser",children:"Fundraiser"})]})]})]}),n.jsxs("div",{children:[n.jsx(z,{htmlFor:"participants","data-testid":"label-participants",children:"Participants"}),n.jsx(jr,{id:"participants",type:"number",...a("participants",{valueAsNumber:!0}),placeholder:"30",className:m.participants?"border-red-500":"focus:ring-2 focus:ring-wine-500 focus:border-transparent","data-testid":"input-participants"}),m.participants&&n.jsx("p",{className:"text-sm text-red-500 mt-1","data-testid":"error-participants",children:m.participants.message})]}),n.jsxs("div",{children:[n.jsx(z,{htmlFor:"difficulty","data-testid":"label-difficulty",children:"Difficulty"}),n.jsxs(ee,{onValueChange:u=>d("difficulty",u),defaultValue:"mixed",children:[n.jsx(te,{"data-testid":"select-difficulty",children:n.jsx(se,{})}),n.jsxs(ne,{children:[n.jsx(C,{value:"mixed",children:"Mixed"}),n.jsx(C,{value:"easy",children:"Easy"}),n.jsx(C,{value:"medium",children:"Medium"}),n.jsx(C,{value:"hard",children:"Hard"})]})]})]})]}),n.jsx(j,{type:"submit",disabled:x.isPending,className:"w-full trivia-button-primary","data-testid":"button-generate-event",children:x.isPending?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Generating Event..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Te,{className:"mr-2 h-4 w-4"}),"Generate Event with AI"]})})]})})]})}function _o(){const{toast:t}=he(),e=br(),[s,r]=yr.useState([]),{data:a}=X({queryKey:["/api/events"]}),{register:l,handleSubmit:d,setValue:h,formState:{errors:m}}=Nr({resolver:wr(Do),defaultValues:{eventId:"",type:"multiple_choice",difficulty:"medium",count:1}}),x=fe({mutationFn:async u=>{const g=await fetch("/api/questions/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!g.ok){const v=await g.json();throw new Error(v.error||"Failed to generate questions")}return g.json()},onSuccess:u=>{r(u.questions),e.invalidateQueries({queryKey:["/api/events"]}),t({title:"Questions Generated!",description:`Added ${u.questions.length} question(s) to the event.`})},onError:u=>{t({title:"Generation Failed",description:u.message,variant:"destructive"})}}),c=u=>{x.mutate(u)};return n.jsxs(A,{className:"trivia-card overflow-hidden","data-testid":"card-question-generator",children:[n.jsx(Q,{className:"border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ia,{className:"text-champagne-600 text-xl mr-3"}),n.jsx(U,{className:"text-lg","data-testid":"text-question-generator-title",children:"AI Question Generator"})]}),n.jsx(V,{variant:"secondary","data-testid":"badge-beta",children:"Beta"})]})}),n.jsxs(M,{className:"p-6",children:[n.jsxs("form",{onSubmit:d(c),className:"space-y-4",children:[n.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.jsxs("div",{children:[n.jsx(z,{htmlFor:"eventId","data-testid":"label-event",children:"Select Event"}),n.jsxs(ee,{onValueChange:u=>h("eventId",u),"data-testid":"select-event",children:[n.jsx(te,{className:m.eventId?"border-red-500":"",children:n.jsx(se,{placeholder:"Choose an event to add questions to"})}),n.jsx(ne,{children:a==null?void 0:a.map(u=>n.jsxs(C,{value:u.id,children:[u.title," (",u.status,")"]},u.id))})]}),m.eventId&&n.jsx("p",{className:"text-sm text-red-500 mt-1","data-testid":"error-event",children:m.eventId.message})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(z,{htmlFor:"topic","data-testid":"label-topic",children:"Topic"}),n.jsx(jr,{id:"topic",...l("topic"),placeholder:"French Wine Regions",className:m.topic?"border-red-500":"focus:ring-2 focus:ring-wine-500 focus:border-transparent","data-testid":"input-topic"}),m.topic&&n.jsx("p",{className:"text-sm text-red-500 mt-1","data-testid":"error-topic",children:m.topic.message})]}),n.jsxs("div",{children:[n.jsx(z,{htmlFor:"type","data-testid":"label-question-type",children:"Question Type"}),n.jsxs(ee,{onValueChange:u=>h("type",u),defaultValue:"multiple_choice",children:[n.jsx(te,{"data-testid":"select-question-type",children:n.jsx(se,{})}),n.jsxs(ne,{children:[n.jsx(C,{value:"multiple_choice",children:"Multiple Choice"}),n.jsx(C,{value:"true_false",children:"True/False"}),n.jsx(C,{value:"fill_blank",children:"Fill in the Blank"})]})]})]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx(j,{type:"submit",disabled:x.isPending,className:"flex-1 trivia-button-secondary","data-testid":"button-generate-question",children:x.isPending?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ja,{className:"mr-2 h-4 w-4"}),"Generate Question"]})}),n.jsx(j,{type:"button",variant:"outline",className:"px-6","data-testid":"button-upload",children:n.jsx(wa,{className:"h-4 w-4"})})]})]}),s.length>0&&n.jsxs("div",{className:"mt-6 space-y-4",children:[n.jsx("h4",{className:"font-medium text-gray-900","data-testid":"text-generated-questions-title",children:"Generated Questions"}),s.map((u,g)=>n.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50","data-testid":`generated-question-${g}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h5",{className:"font-medium text-gray-900","data-testid":`text-question-${g}`,children:u.question}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(V,{variant:"outline","data-testid":`badge-type-${g}`,children:u.type.replace("_"," ")}),n.jsx(V,{variant:"secondary","data-testid":`badge-difficulty-${g}`,children:u.difficulty})]})]}),u.options&&u.options.length>0&&n.jsx("div",{className:"grid grid-cols-2 gap-2 mt-3",children:u.options.map((v,Z)=>n.jsx("div",{className:`p-2 text-sm rounded border ${v===u.correctAnswer?"border-emerald-300 bg-emerald-50 text-emerald-800":"border-gray-200 bg-white"}`,"data-testid":`option-${g}-${Z}`,children:v},Z))}),n.jsxs("div",{className:"flex items-center justify-between mt-3 text-sm text-gray-600",children:[n.jsxs("span",{"data-testid":`text-correct-answer-${g}`,children:["Correct: ",n.jsx("span",{className:"font-medium text-emerald-600",children:u.correctAnswer})]}),n.jsxs("span",{"data-testid":`text-points-${g}`,children:[u.points," points • ",u.timeLimit,"s"]})]})]},g)),n.jsx(j,{onClick:()=>r([]),variant:"outline",className:"w-full","data-testid":"button-clear-questions",children:"Clear Generated Questions"})]})]})]})}function Ao(){const{data:t,isLoading:e}=X({queryKey:["/api/events/active"]});return e?n.jsxs(A,{className:"trivia-card","data-testid":"card-active-events-loading",children:[n.jsx(Q,{children:n.jsxs(U,{className:"flex items-center","data-testid":"text-active-events-title",children:[n.jsx(Pe,{className:"text-emerald-500 mr-2 h-5 w-5"}),"Active Events"]})}),n.jsx(M,{children:n.jsxs("div",{className:"animate-pulse space-y-4",children:[n.jsx("div",{className:"h-20 bg-gray-200 rounded"}),n.jsx("div",{className:"h-16 bg-gray-100 rounded"})]})})]}):n.jsxs(A,{className:"trivia-card","data-testid":"card-active-events",children:[n.jsx(Q,{children:n.jsxs(U,{className:"flex items-center","data-testid":"text-active-events-title",children:[n.jsx(Pe,{className:"text-emerald-500 mr-2 h-5 w-5"}),"Active Events"]})}),n.jsx(M,{children:n.jsx("div",{className:"space-y-4",children:t&&t.length>0?t.map((s,r)=>n.jsxs("div",{className:"p-4 border border-emerald-200 rounded-lg bg-emerald-50","data-testid":`active-event-${r}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-medium text-gray-900","data-testid":`text-active-event-title-${r}`,children:s.title}),n.jsx(V,{className:"bg-emerald-100 text-emerald-800","data-testid":`badge-active-event-status-${r}`,children:"Live"})]}),n.jsxs("p",{className:"text-sm text-gray-600 mb-3","data-testid":`text-active-event-info-${r}`,children:[s.maxParticipants," max participants • ",s.difficulty," difficulty"]}),n.jsxs("div",{className:"flex space-x-1",children:[n.jsx(F,{href:`/events/${s.id}/manage`,children:n.jsxs(j,{size:"sm",variant:"outline",className:"border-gray-300 hover:bg-gray-50 text-xs","data-testid":`button-manage-active-event-${r}`,children:[n.jsx(ye,{className:"mr-1 h-3 w-3"}),"Manage"]})}),n.jsx(F,{href:`/event/${s.id}`,children:n.jsxs(j,{size:"sm",className:"bg-emerald-600 text-white hover:bg-emerald-700 text-xs","data-testid":`button-view-active-event-${r}`,children:[n.jsx(Ne,{className:"mr-1 h-3 w-3"}),"Event"]})}),n.jsx(F,{href:`/presenter/${s.id}`,children:n.jsxs(j,{size:"sm",variant:"outline",className:"border-emerald-300 text-emerald-700 hover:bg-emerald-50 text-xs","data-testid":`button-presenter-active-event-${r}`,children:[n.jsx(ve,{className:"mr-1 h-3 w-3"}),"Present"]})}),n.jsx(F,{href:`/presenter-demo/${s.id}`,children:n.jsxs(j,{size:"sm",variant:"outline",className:"bg-champagne-50 border-champagne-300 text-champagne-700 hover:bg-champagne-100 text-xs","data-testid":`button-demo-active-event-${r}`,children:[n.jsx(be,{className:"mr-1 h-3 w-3"}),"Demo"]})})]})]},s.id)):n.jsxs("div",{className:"text-center py-6","data-testid":"text-no-active-events",children:[n.jsx(Pa,{className:"h-8 w-8 text-gray-400 mb-2 mx-auto"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"No active events"})]})})})]})}const Mo=t=>{switch(t){case"wine_dinner":return re;case"corporate":return Sr;case"party":return Tr;default:return re}},qo=t=>{switch(t){case"wine_dinner":return"bg-wine-100 text-wine-600";case"corporate":return"bg-champagne-100 text-champagne-600";case"party":return"bg-coral-100 text-coral-500";default:return"bg-wine-100 text-wine-600"}},Fo=t=>{if(!t)return"No date set";const e=new Date(t),r=Math.abs(new Date().getTime()-e.getTime()),a=Math.ceil(r/(1e3*60*60*24));return a===1?"Yesterday":a<=7?`${a} days ago`:a<=30?`${Math.ceil(a/7)} week${Math.ceil(a/7)>1?"s":""} ago`:e.toLocaleDateString()};function Lo(){const{data:t,isLoading:e}=X({queryKey:["/api/events"]}),s=new Date,r=(t==null?void 0:t.filter(a=>a.eventDate?new Date(a.eventDate)<s:!1).sort((a,l)=>{const d=new Date(a.eventDate);return new Date(l.eventDate).getTime()-d.getTime()}).slice(0,3))||[];return e?n.jsxs(A,{className:"trivia-card","data-testid":"card-recent-events-loading",children:[n.jsx(Q,{children:n.jsx(U,{"data-testid":"text-recent-events-title",children:"Recent Events"})}),n.jsx(M,{children:n.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(a=>n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded"}),n.jsx("div",{className:"h-3 bg-gray-100 rounded w-3/4"})]})]},a))})})]}):n.jsxs(A,{className:"trivia-card","data-testid":"card-recent-events",children:[n.jsx(Q,{children:n.jsx(U,{"data-testid":"text-recent-events-title",children:"Recent Events"})}),n.jsx(M,{children:n.jsx("div",{className:"space-y-4",children:r.length>0?r.map((a,l)=>{const d=Mo(a.eventType),h=qo(a.eventType);return n.jsxs("div",{className:"border rounded-lg p-3 hover:bg-gray-50 transition-colors","data-testid":`recent-event-${l}`,children:[n.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[n.jsx("div",{className:`w-10 h-10 ${h} rounded-lg flex items-center justify-center`,children:n.jsx(d,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-900","data-testid":`text-recent-event-title-${l}`,children:a.title}),n.jsxs("p",{className:"text-sm text-gray-600","data-testid":`text-recent-event-info-${l}`,children:[a.maxParticipants," max participants • ",Fo(a.eventDate)]})]})]}),n.jsxs("div",{className:"flex space-x-1",children:[n.jsx(F,{href:`/events/${a.id}/manage`,children:n.jsxs(j,{size:"sm",variant:"outline",className:"text-xs",children:[n.jsx(ye,{className:"mr-1 h-3 w-3"}),"Manage"]})}),n.jsx(F,{href:`/event/${a.id}`,children:n.jsxs(j,{size:"sm",className:"text-xs",children:[n.jsx(Ne,{className:"mr-1 h-3 w-3"}),"Event"]})}),n.jsx(F,{href:`/presenter/${a.id}`,children:n.jsxs(j,{size:"sm",variant:"outline",className:"text-xs",children:[n.jsx(ve,{className:"mr-1 h-3 w-3"}),"Present"]})}),n.jsx(F,{href:`/presenter-demo/${a.id}`,children:n.jsxs(j,{size:"sm",variant:"outline",className:"text-xs bg-champagne-50 border-champagne-300 text-champagne-700 hover:bg-champagne-100",children:[n.jsx(be,{className:"mr-1 h-3 w-3"}),"Demo"]})})]})]},a.id)}):n.jsx("div",{className:"text-center py-6","data-testid":"text-no-recent-events",children:n.jsx("p",{className:"text-gray-500 text-sm",children:"No recent events"})})})})]})}const $o=t=>{switch(t){case"wine_dinner":return re;case"corporate":return Sr;case"party":return Tr;default:return re}},Bo=t=>{switch(t){case"wine_dinner":return"bg-wine-100 text-wine-600";case"corporate":return"bg-champagne-100 text-champagne-600";case"party":return"bg-coral-100 text-coral-500";default:return"bg-wine-100 text-wine-600"}},Vo=t=>{if(!t)return"No date set";const e=new Date(t),s=new Date,r=e.getTime()-s.getTime(),a=Math.ceil(r/(1e3*60*60*24));return a===0?"Today":a===1?"Tomorrow":a<=7?`In ${a} days`:a<=30?`In ${Math.ceil(a/7)} week${Math.ceil(a/7)>1?"s":""}`:e.toLocaleDateString()};function Eo(){const{data:t,isLoading:e}=X({queryKey:["/api/events"]}),s=new Date,r=(t==null?void 0:t.filter(a=>a.eventDate?new Date(a.eventDate)>=s:!1).sort((a,l)=>{const d=new Date(a.eventDate),h=new Date(l.eventDate);return d.getTime()-h.getTime()}).slice(0,3))||[];return e?n.jsxs(A,{className:"trivia-card","data-testid":"card-upcoming-events-loading",children:[n.jsx(Q,{children:n.jsx(U,{"data-testid":"text-upcoming-events-title",children:"Upcoming Events"})}),n.jsx(M,{children:n.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(a=>n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded"}),n.jsx("div",{className:"h-3 bg-gray-100 rounded w-3/4"})]})]},a))})})]}):n.jsxs(A,{className:"trivia-card","data-testid":"card-upcoming-events",children:[n.jsx(Q,{children:n.jsxs(U,{className:"flex items-center","data-testid":"text-upcoming-events-title",children:[n.jsx(xe,{className:"text-blue-500 mr-2 h-5 w-5"}),"Upcoming Events"]})}),n.jsx(M,{children:n.jsx("div",{className:"space-y-4",children:r.length>0?r.map((a,l)=>{const d=$o(a.eventType),h=Bo(a.eventType);return n.jsxs("div",{className:"border rounded-lg p-3 hover:bg-gray-50 transition-colors","data-testid":`upcoming-event-${l}`,children:[n.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[n.jsx("div",{className:`w-10 h-10 ${h} rounded-lg flex items-center justify-center`,children:n.jsx(d,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-900","data-testid":`text-upcoming-event-title-${l}`,children:a.title}),n.jsxs("p",{className:"text-sm text-gray-600","data-testid":`text-upcoming-event-info-${l}`,children:[a.maxParticipants," max participants • ",Vo(a.eventDate)]})]})]}),n.jsxs("div",{className:"flex space-x-1",children:[n.jsx(F,{href:`/events/${a.id}/manage`,children:n.jsxs(j,{size:"sm",variant:"outline",className:"text-xs",children:[n.jsx(ye,{className:"mr-1 h-3 w-3"}),"Manage"]})}),n.jsx(F,{href:`/event/${a.id}`,children:n.jsxs(j,{size:"sm",className:"text-xs",children:[n.jsx(Ne,{className:"mr-1 h-3 w-3"}),"Event"]})}),n.jsx(F,{href:`/presenter/${a.id}`,children:n.jsxs(j,{size:"sm",variant:"outline",className:"text-xs",children:[n.jsx(ve,{className:"mr-1 h-3 w-3"}),"Present"]})}),n.jsx(F,{href:`/presenter-demo/${a.id}`,children:n.jsxs(j,{size:"sm",variant:"outline",className:"text-xs bg-champagne-50 border-champagne-300 text-champagne-700 hover:bg-champagne-100",children:[n.jsx(be,{className:"mr-1 h-3 w-3"}),"Demo"]})})]})]},a.id)}):n.jsx("div",{className:"text-center py-6","data-testid":"text-no-upcoming-events",children:n.jsx("p",{className:"text-gray-500 text-sm",children:"No upcoming events"})})})})]})}function ll(){const{toast:t}=he(),[,e]=xr(),s=br(),{data:r,isLoading:a,error:l}=X({queryKey:["/api/auth/me"],retry:!1}),{data:d,isLoading:h}=X({queryKey:["/api/dashboard/stats"],enabled:!!r}),m=fe({mutationFn:async()=>{const x=await fetch("/api/auth/logout",{method:"POST",credentials:"include"});if(!x.ok)throw new Error("Logout failed");return x.json()},onSuccess:()=>{s.clear(),t({title:"Logged out",description:"You have been successfully logged out."}),e("/login")}});return l||!a&&!r?(e("/login"),null):r?a?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 wine-gradient rounded-2xl flex items-center justify-center mx-auto mb-4",children:n.jsx(vr,{className:"text-champagne-400 h-8 w-8 animate-pulse"})}),n.jsx("p",{className:"text-wine-700",children:"Loading..."})]})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-2","data-testid":"welcome-heading",children:["Welcome back, ",r==null?void 0:r.user.fullName,"!"]}),n.jsx("p",{className:"text-gray-600","data-testid":"welcome-description",children:"Create unforgettable trivia experiences with AI-powered content generation"})]}),n.jsxs(j,{variant:"ghost",onClick:()=>m.mutate(),className:"text-gray-600 hover:text-gray-800 hover:bg-gray-100","data-testid":"button-logout",children:[n.jsx(Sa,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),n.jsx(_a,{stats:d,isLoading:h}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsx(Co,{}),n.jsx(_o,{}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(A,{className:"trivia-card hover:shadow-md transition-shadow cursor-pointer","data-testid":"card-qr-event",children:n.jsxs(M,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-wine-100 rounded-lg flex items-center justify-center mr-4",children:n.jsx(Ta,{className:"text-wine-700 h-6 w-6"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900","data-testid":"text-qr-title",children:"Quick QR Event"}),n.jsx("p",{className:"text-gray-600 text-sm","data-testid":"text-qr-description",children:"Start instant trivia"})]})]}),n.jsx(j,{className:"w-full bg-wine-100 text-wine-700 hover:bg-wine-200","data-testid":"button-create-qr",children:"Create QR Code"})]})}),n.jsx(A,{className:"trivia-card hover:shadow-md transition-shadow cursor-pointer","data-testid":"card-clone-event",children:n.jsxs(M,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-champagne-100 rounded-lg flex items-center justify-center mr-4",children:n.jsx(Da,{className:"text-champagne-600 h-6 w-6"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900","data-testid":"text-clone-title",children:"Clone Event"}),n.jsx("p",{className:"text-gray-600 text-sm","data-testid":"text-clone-description",children:"Reuse successful events"})]})]}),n.jsx(j,{className:"w-full bg-champagne-100 text-champagne-700 hover:bg-champagne-200","data-testid":"button-browse-templates",children:"Browse Templates"})]})})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(Ao,{}),n.jsx(Eo,{}),n.jsx(Lo,{})]})]}),n.jsx("div",{className:"fixed bottom-6 right-6 md:hidden",children:n.jsx(j,{className:"w-14 h-14 rounded-full wine-gradient shadow-lg hover:shadow-xl","data-testid":"button-mobile-fab",children:n.jsx(xe,{className:"h-6 w-6"})})})]}):null}export{ll as default};
