import{d as U,r as o,j as e}from"./index-C8fLGFJh.js";import{u as h}from"./useQuery-DueBIpiR.js";import{C as p,a as F,b as $,c as j}from"./card-GbOed6mg.js";import{B as i}from"./button-dYtoLpIz.js";import{B as H}from"./badge-CjLB_lGN.js";import{T as g}from"./trophy-3qvjUIUt.js";import{S as I}from"./star-BMV-5Lkw.js";import{P}from"./play-DF7goTtl.js";import{P as J}from"./pause-DrT8PjDK.js";import{C as Q,R as G}from"./rotate-ccw-DCj3_-sb.js";const z=({value:N,className:r})=>e.jsx("div",{className:`w-full bg-gray-200 rounded-full h-2 ${r}`,children:e.jsx("div",{className:"bg-champagne-400 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,N))}%`}})});function le(){const[,N]=U("/presenter/:id"),r=N?.id,[x,C]=o.useState(0),[L,v]=o.useState(!1),[c,m]=o.useState("waiting"),[n,b]=o.useState(30),[u,d]=o.useState(!1),[w,R]=o.useState(!0),{data:y}=h({queryKey:["/api/events",r],enabled:!!r}),{data:l}=h({queryKey:["/api/events",r,"questions"],enabled:!!r}),{data:S}=h({queryKey:["/api/events",r,"participants"],enabled:!!r}),{data:K}=h({queryKey:["/api/events",r,"teams"],enabled:!!r}),{data:f}=h({queryKey:["/api/events",r,"fun-facts"],enabled:!!r}),t=l?.[x],B=l?(x+1)/l.length*100:0,E=n/30*100;o.useEffect(()=>{let a;return u&&n>0&&(a=setInterval(()=>{b(s=>s<=1?(d(!1),w&&c==="question"&&setTimeout(()=>A(),500),0):s-1)},1e3)),()=>clearInterval(a)},[u,n,w,c]);const M=[{name:"SaraTeam",score:450,rank:1},{name:"JohnTeam",score:380,rank:2},{name:"Individual Players",score:320,rank:3}],q=()=>{l&&x<l.length-1?(C(x+1),v(!1),m("question"),b(30),d(!0)):(m("leaderboard"),d(!1))},A=()=>{v(!0),m("answer"),d(!1)},k=()=>{m("leaderboard")},T=()=>{C(0),v(!1),m("waiting"),b(30),d(!1)},O=()=>{m("question"),b(30),d(!0)};return y?e.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-wine-900 to-champagne-900 text-white overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 p-4 lg:p-6 border-b border-white/20",children:[e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-4xl xl:text-5xl font-bold text-champagne-200 truncate","data-testid":"text-event-title",children:y.title}),e.jsx("p",{className:"text-xs sm:text-sm lg:text-xl text-white/80 truncate","data-testid":"text-event-description",children:y.description})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 lg:space-x-6 text-right flex-shrink-0",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-champagne-300",children:S?.length||0}),e.jsx("div",{className:"text-xs sm:text-sm text-white/60",children:"Participants"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-champagne-300",children:K?.length||0}),e.jsx("div",{className:"text-xs sm:text-sm text-white/60",children:"Teams"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-champagne-300",children:l?.length||0}),e.jsx("div",{className:"text-xs sm:text-sm text-white/60",children:"Questions"})]})]})]}),e.jsxs("div",{className:"mt-3 lg:mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 flex-wrap gap-2",children:[e.jsx("span",{className:"text-xs sm:text-sm text-white/60",children:"Progress"}),e.jsxs("span",{className:"text-xs sm:text-sm text-champagne-300",children:["Question ",x+1," of ",l?.length||0]})]}),e.jsx(z,{value:B,className:"h-2 bg-white/20","data-testid":"progress-game"})]})]}),e.jsxs("div",{className:"flex-1 flex items-center justify-center p-4 lg:p-6 pb-20 lg:pb-24 overflow-hidden",children:[c==="waiting"&&e.jsxs("div",{className:"text-center w-full max-w-4xl","data-testid":"view-waiting",children:[e.jsx("div",{className:"w-20 h-20 lg:w-32 lg:h-32 wine-gradient rounded-full flex items-center justify-center mx-auto mb-6 lg:mb-8",children:e.jsx(g,{className:"h-10 w-10 lg:h-16 lg:w-16 text-white"})}),e.jsx("h2",{className:"text-4xl lg:text-6xl xl:text-7xl font-bold mb-3 lg:mb-4 text-champagne-200",children:"Welcome to Trivia!"}),e.jsx("p",{className:"text-lg lg:text-2xl xl:text-3xl text-white/80 mb-6 lg:mb-8",children:"Get ready for an amazing experience"}),e.jsxs("div",{className:"text-base lg:text-lg text-champagne-300",children:[S?.length||0," participants ready to play"]})]}),c==="question"&&t&&e.jsx("div",{className:"w-full max-w-7xl h-full flex flex-col","data-testid":"view-question",children:e.jsxs(p,{className:"bg-white/10 backdrop-blur-sm border-white/20 text-white flex-1 flex flex-col relative overflow-hidden",children:[t.backgroundImageUrl&&e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${t.backgroundImageUrl})`},children:e.jsx("div",{className:"absolute inset-0 bg-black/75"})}),e.jsx(F,{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"text-xl lg:text-3xl text-white drop-shadow-lg",children:["Question ",x+1]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-4xl font-bold ${n<=10?"text-red-400 animate-pulse":n<=20?"text-yellow-400":"text-green-400"}`,"data-testid":"text-timer",children:[n,"s"]}),e.jsx("div",{className:"w-24",children:e.jsx(z,{value:E,className:`h-2 ${n<=10?"bg-red-200":n<=20?"bg-yellow-200":"bg-green-200"}`})})]}),e.jsx(H,{variant:"secondary",className:"bg-champagne-200 text-champagne-900 text-lg px-4 py-2",children:t.difficulty})]})]})}),e.jsx(j,{className:"flex-1 flex flex-col justify-center relative z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-black/80 backdrop-blur-sm rounded-xl p-4 lg:p-6 mb-4 lg:mb-8 border border-white/20",children:e.jsx("h3",{className:`font-bold leading-tight text-white ${t.question.length>120?"text-lg lg:text-2xl xl:text-3xl":t.question.length>80?"text-xl lg:text-3xl xl:text-4xl":"text-2xl lg:text-4xl xl:text-5xl"}`,"data-testid":"text-current-question",children:t.question})}),t.options&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 lg:gap-6 max-w-6xl mx-auto",children:t.options.map((a,s)=>e.jsx("div",{className:`p-3 lg:p-6 rounded-lg border-2 ${L&&a===t.correctAnswer?"bg-green-600 border-green-400 text-white shadow-lg":"bg-gray-800 border-gray-600 hover:bg-gray-700 text-white"} transition-all duration-300`,"data-testid":`option-${s}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-champagne-200 text-champagne-900 font-bold flex items-center justify-center mr-4",children:String.fromCharCode(65+s)}),e.jsx("span",{className:"text-base lg:text-xl font-medium text-white",children:a})]})},s))})]})})]})}),c==="answer"&&t&&e.jsxs("div",{className:"w-full max-w-7xl h-full flex flex-col space-y-4 lg:space-y-8","data-testid":"view-answer",children:[e.jsx(p,{className:"bg-white/10 backdrop-blur-sm border-white/20 text-white",children:e.jsxs(j,{className:"py-6 lg:py-8 h-full flex flex-col justify-center",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 lg:gap-8 h-full",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-green-500 rounded-full flex items-center justify-center mb-3 lg:mb-4",children:e.jsx(I,{className:"h-8 w-8 lg:h-10 lg:w-10 text-white"})}),e.jsx("h3",{className:"text-xl lg:text-2xl xl:text-3xl font-bold text-green-300",children:"Correct Answer"})]}),e.jsx("div",{className:"flex items-center justify-center text-center",children:e.jsx("p",{className:"text-xl lg:text-3xl xl:text-4xl font-bold text-white","data-testid":"text-correct-answer",children:t.correctAnswer})})]}),t.explanation&&e.jsx("div",{className:"mt-4 lg:mt-6 text-center",children:e.jsx("p",{className:"text-sm lg:text-lg text-white/80 max-w-4xl mx-auto leading-relaxed",children:t.explanation})})]})}),f&&f.length>0&&e.jsx(p,{className:"bg-champagne-600/20 backdrop-blur-sm border-champagne-400/30 text-white flex-1",children:e.jsxs(j,{className:"text-center py-4 lg:py-8 h-full flex flex-col justify-center",children:[e.jsx("div",{className:"w-12 h-12 lg:w-16 lg:h-16 bg-champagne-500 rounded-full flex items-center justify-center mx-auto mb-2 lg:mb-4",children:e.jsx(I,{className:"h-6 w-6 lg:h-8 lg:w-8 text-champagne-900"})}),e.jsx("h4",{className:"text-lg lg:text-2xl font-bold mb-2 lg:mb-4 text-champagne-200",children:"Fun Fact!"}),(()=>{const a=f[x%f.length];return e.jsxs("div",{children:[e.jsx("h5",{className:"text-base lg:text-xl font-semibold mb-2 lg:mb-3 text-champagne-100",children:a.title}),e.jsx("p",{className:"text-sm lg:text-lg text-white/90 max-w-5xl mx-auto leading-relaxed",children:a.content})]})})()]})})]}),c==="leaderboard"&&e.jsx("div",{className:"w-full max-w-5xl h-full flex flex-col","data-testid":"view-leaderboard",children:e.jsxs(p,{className:"bg-white/10 backdrop-blur-sm border-white/20 text-white flex-1 flex flex-col",children:[e.jsx(F,{className:"flex-shrink-0",children:e.jsxs($,{className:"text-2xl lg:text-4xl text-center flex items-center justify-center",children:[e.jsx(g,{className:"mr-2 lg:mr-4 h-6 w-6 lg:h-10 lg:w-10 text-yellow-400"}),"Leaderboard"]})}),e.jsx(j,{className:"flex-1 flex flex-col justify-center",children:e.jsx("div",{className:"space-y-3 lg:space-y-4",children:M.map((a,s)=>e.jsxs("div",{className:`flex items-center justify-between p-4 lg:p-6 rounded-lg ${s===0?"bg-yellow-500/20 border-2 border-yellow-400":s===1?"bg-gray-300/20 border-2 border-gray-400":s===2?"bg-amber-600/20 border-2 border-amber-600":"bg-white/5 border border-white/20"}`,"data-testid":`leaderboard-entry-${s}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 lg:w-12 lg:h-12 rounded-full flex items-center justify-center font-bold text-lg lg:text-xl mr-3 lg:mr-4 ${s===0?"bg-yellow-400 text-yellow-900":s===1?"bg-gray-400 text-gray-900":s===2?"bg-amber-600 text-amber-100":"bg-white/20 text-white"}`,children:a.rank}),e.jsx("span",{className:"text-lg lg:text-2xl font-semibold",children:a.name})]}),e.jsx("span",{className:"text-xl lg:text-3xl font-bold text-champagne-300",children:a.score})]},a.name))})})]})})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/90 backdrop-blur-sm border-t border-white/20 p-2 lg:p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-center space-x-2 lg:space-x-4",children:[c==="waiting"&&e.jsx(e.Fragment,{children:e.jsxs(i,{onClick:O,className:"bg-green-600 hover:bg-green-700 text-white px-4 lg:px-8 py-2 lg:py-4 text-base lg:text-lg font-semibold","data-testid":"button-start-game",children:[e.jsx(P,{className:"mr-2 h-5 w-5"}),"Start Game"]})}),c==="question"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:`text-2xl font-bold ${n<=10?"text-red-400":n<=20?"text-yellow-400":"text-white"}`,children:["Time: ",n,"s"]}),e.jsx(i,{onClick:()=>d(!u),className:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700 border","data-testid":"button-toggle-timer",children:u?e.jsx(J,{className:"h-4 w-4"}):e.jsx(P,{className:"h-4 w-4"})})]}),e.jsx(i,{onClick:A,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 text-lg","data-testid":"button-show-answer",children:"Show Answer"}),e.jsxs(i,{onClick:k,className:"bg-wine-700 hover:bg-wine-600 text-white border border-wine-500 px-6 py-3","data-testid":"button-show-leaderboard",children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Show Leaderboard"]})]}),c==="answer"&&e.jsxs(e.Fragment,{children:[e.jsxs(i,{onClick:q,className:"bg-green-600 hover:bg-green-700 text-white px-8 py-4 text-lg font-semibold",disabled:!l||x>=l.length-1,"data-testid":"button-next-question",children:[e.jsx(Q,{className:"mr-2 h-5 w-5"}),l&&x>=l.length-1?"Finish Game":"Next Question"]}),e.jsxs(i,{onClick:k,className:"bg-wine-700 hover:bg-wine-600 text-white border border-wine-500 px-6 py-3","data-testid":"button-show-leaderboard-from-answer",children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Show Leaderboard"]}),e.jsx(i,{onClick:()=>R(!w),size:"sm",className:"bg-champagne-700 hover:bg-champagne-600 text-white border border-champagne-500","data-testid":"button-toggle-auto",children:w?"Auto: ON":"Auto: OFF"})]}),c==="leaderboard"&&e.jsx(e.Fragment,{children:l&&x<l.length-1?e.jsxs(i,{onClick:q,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 text-lg font-semibold border border-blue-500","data-testid":"button-continue-from-leaderboard",children:[e.jsx(Q,{className:"mr-2 h-5 w-5"}),"Continue Game"]}):e.jsxs(i,{onClick:T,className:"bg-wine-600 hover:bg-wine-700 text-white px-8 py-4 text-lg font-semibold border border-wine-500","data-testid":"button-restart-game",children:[e.jsx(G,{className:"mr-2 h-5 w-5"}),"Game Complete"]})}),e.jsxs("div",{className:"flex items-center space-x-2 ml-8",children:[e.jsx(i,{onClick:T,size:"sm",className:"bg-red-700 hover:bg-red-600 text-white border border-red-500","data-testid":"button-reset",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(i,{onClick:k,size:"sm",className:"bg-yellow-700 hover:bg-yellow-600 text-white border border-yellow-500","data-testid":"button-leaderboard",children:e.jsx(g,{className:"h-4 w-4"})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-900 to-champagne-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Event Not Found"}),e.jsx("p",{className:"text-xl",children:"The presenter view could not be loaded."})]})})}export{le as default};
