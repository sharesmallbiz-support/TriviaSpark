import{g as ge,a as me,u as we,b as pe,r as J,j as u}from"./index-C8fLGFJh.js";import{u as jt}from"./useQuery-DueBIpiR.js";import{u as At}from"./useMutation-DDhg2ePi.js";import{C as O,a as Mt,b as Pt,c as Y}from"./card-GbOed6mg.js";import{B as _}from"./button-dYtoLpIz.js";import{B as ye}from"./badge-CjLB_lGN.js";import{B as Q}from"./brain-C2VL5WdU.js";import{L as Ce}from"./log-out-BRGF2B83.js";import{C as Tt}from"./calendar-nen8wffC.js";import{M as Ee}from"./map-pin-BHE1fp5t.js";import{B as Ne}from"./building-2-_Px4qFnL.js";import{U as St}from"./users-BrFF6HMn.js";import{P as xe}from"./play-DF7goTtl.js";import{Q as Be}from"./qr-code-D3nuIu8N.js";var z={},tt,It;function be(){return It||(It=1,tt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),tt}var et={},D={},Lt;function F(){if(Lt)return D;Lt=1;let i;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return D.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},D.getSymbolTotalCodewords=function(e){return r[e]},D.getBCHDigit=function(o){let e=0;for(;o!==0;)e++,o>>>=1;return e},D.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');i=e},D.isKanjiModeEnabled=function(){return typeof i<"u"},D.toSJIS=function(e){return i(e)},D}var nt={},qt;function Bt(){return qt||(qt=1,(function(i){i.L={bit:1},i.M={bit:0},i.Q={bit:3},i.H={bit:2};function r(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return i.L;case"m":case"medium":return i.M;case"q":case"quartile":return i.Q;case"h":case"high":return i.H;default:throw new Error("Unknown EC Level: "+o)}}i.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4},i.from=function(e,t){if(i.isValid(e))return e;try{return r(e)}catch{return t}}})(nt)),nt}var rt,Dt;function ve(){if(Dt)return rt;Dt=1;function i(){this.buffer=[],this.length=0}return i.prototype={get:function(r){const o=Math.floor(r/8);return(this.buffer[o]>>>7-r%8&1)===1},put:function(r,o){for(let e=0;e<o;e++)this.putBit((r>>>o-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),r&&(this.buffer[o]|=128>>>this.length%8),this.length++}},rt=i,rt}var it,Ft;function Re(){if(Ft)return it;Ft=1;function i(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}return i.prototype.set=function(r,o,e,t){const n=r*this.size+o;this.data[n]=e,t&&(this.reservedBit[n]=!0)},i.prototype.get=function(r,o){return this.data[r*this.size+o]},i.prototype.xor=function(r,o,e){this.data[r*this.size+o]^=e},i.prototype.isReserved=function(r,o){return this.reservedBit[r*this.size+o]},it=i,it}var ot={},Ut;function je(){return Ut||(Ut=1,(function(i){const r=F().getSymbolSize;i.getRowColCoords=function(e){if(e===1)return[];const t=Math.floor(e/7)+2,n=r(e),s=n===145?26:Math.ceil((n-13)/(2*t-2))*2,c=[n-7];for(let a=1;a<t-1;a++)c[a]=c[a-1]-s;return c.push(6),c.reverse()},i.getPositions=function(e){const t=[],n=i.getRowColCoords(e),s=n.length;for(let c=0;c<s;c++)for(let a=0;a<s;a++)c===0&&a===0||c===0&&a===s-1||c===s-1&&a===0||t.push([n[c],n[a]]);return t}})(ot)),ot}var st={},kt;function Ae(){if(kt)return st;kt=1;const i=F().getSymbolSize,r=7;return st.getPositions=function(e){const t=i(e);return[[0,0],[t-r,0],[0,t-r]]},st}var at={},_t;function Me(){return _t||(_t=1,(function(i){i.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};i.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},i.from=function(t){return i.isValid(t)?parseInt(t,10):void 0},i.getPenaltyN1=function(t){const n=t.size;let s=0,c=0,a=0,d=null,h=null;for(let x=0;x<n;x++){c=a=0,d=h=null;for(let w=0;w<n;w++){let f=t.get(x,w);f===d?c++:(c>=5&&(s+=r.N1+(c-5)),d=f,c=1),f=t.get(w,x),f===h?a++:(a>=5&&(s+=r.N1+(a-5)),h=f,a=1)}c>=5&&(s+=r.N1+(c-5)),a>=5&&(s+=r.N1+(a-5))}return s},i.getPenaltyN2=function(t){const n=t.size;let s=0;for(let c=0;c<n-1;c++)for(let a=0;a<n-1;a++){const d=t.get(c,a)+t.get(c,a+1)+t.get(c+1,a)+t.get(c+1,a+1);(d===4||d===0)&&s++}return s*r.N2},i.getPenaltyN3=function(t){const n=t.size;let s=0,c=0,a=0;for(let d=0;d<n;d++){c=a=0;for(let h=0;h<n;h++)c=c<<1&2047|t.get(d,h),h>=10&&(c===1488||c===93)&&s++,a=a<<1&2047|t.get(h,d),h>=10&&(a===1488||a===93)&&s++}return s*r.N3},i.getPenaltyN4=function(t){let n=0;const s=t.data.length;for(let a=0;a<s;a++)n+=t.data[a];return Math.abs(Math.ceil(n*100/s/5)-10)*r.N4};function o(e,t,n){switch(e){case i.Patterns.PATTERN000:return(t+n)%2===0;case i.Patterns.PATTERN001:return t%2===0;case i.Patterns.PATTERN010:return n%3===0;case i.Patterns.PATTERN011:return(t+n)%3===0;case i.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2===0;case i.Patterns.PATTERN101:return t*n%2+t*n%3===0;case i.Patterns.PATTERN110:return(t*n%2+t*n%3)%2===0;case i.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}i.applyMask=function(t,n){const s=n.size;for(let c=0;c<s;c++)for(let a=0;a<s;a++)n.isReserved(a,c)||n.xor(a,c,o(t,a,c))},i.getBestMask=function(t,n){const s=Object.keys(i.Patterns).length;let c=0,a=1/0;for(let d=0;d<s;d++){n(d),i.applyMask(d,t);const h=i.getPenaltyN1(t)+i.getPenaltyN2(t)+i.getPenaltyN3(t)+i.getPenaltyN4(t);i.applyMask(d,t),h<a&&(a=h,c=d)}return c}})(at)),at}var $={},zt;function ae(){if(zt)return $;zt=1;const i=Bt(),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return $.getBlocksCount=function(t,n){switch(n){case i.L:return r[(t-1)*4+0];case i.M:return r[(t-1)*4+1];case i.Q:return r[(t-1)*4+2];case i.H:return r[(t-1)*4+3];default:return}},$.getTotalCodewordsCount=function(t,n){switch(n){case i.L:return o[(t-1)*4+0];case i.M:return o[(t-1)*4+1];case i.Q:return o[(t-1)*4+2];case i.H:return o[(t-1)*4+3];default:return}},$}var ct={},K={},Vt;function Pe(){if(Vt)return K;Vt=1;const i=new Uint8Array(512),r=new Uint8Array(256);return(function(){let e=1;for(let t=0;t<255;t++)i[t]=e,r[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)i[t]=i[t-255]})(),K.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},K.exp=function(e){return i[e]},K.mul=function(e,t){return e===0||t===0?0:i[r[e]+r[t]]},K}var Kt;function Te(){return Kt||(Kt=1,(function(i){const r=Pe();i.mul=function(e,t){const n=new Uint8Array(e.length+t.length-1);for(let s=0;s<e.length;s++)for(let c=0;c<t.length;c++)n[s+c]^=r.mul(e[s],t[c]);return n},i.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){const s=n[0];for(let a=0;a<t.length;a++)n[a]^=r.mul(t[a],s);let c=0;for(;c<n.length&&n[c]===0;)c++;n=n.slice(c)}return n},i.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let n=0;n<e;n++)t=i.mul(t,new Uint8Array([1,r.exp(n)]));return t}})(ct)),ct}var ut,Ht;function Se(){if(Ht)return ut;Ht=1;const i=Te();function r(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}return r.prototype.initialize=function(e){this.degree=e,this.genPoly=i.generateECPolynomial(this.degree)},r.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=i.mod(t,this.genPoly),s=this.degree-n.length;if(s>0){const c=new Uint8Array(this.degree);return c.set(n,s),c}return n},ut=r,ut}var lt={},dt={},ft={},Jt;function ce(){return Jt||(Jt=1,ft.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40}),ft}var S={},Ot;function ue(){if(Ot)return S;Ot=1;const i="[0-9]+",r="[A-Z $%*+\\-./:]+";let o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");const e="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+`)(?:.|[\r
]))+`;S.KANJI=new RegExp(o,"g"),S.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),S.BYTE=new RegExp(e,"g"),S.NUMERIC=new RegExp(i,"g"),S.ALPHANUMERIC=new RegExp(r,"g");const t=new RegExp("^"+o+"$"),n=new RegExp("^"+i+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return S.testKanji=function(a){return t.test(a)},S.testNumeric=function(a){return n.test(a)},S.testAlphanumeric=function(a){return s.test(a)},S}var Yt;function U(){return Yt||(Yt=1,(function(i){const r=ce(),o=ue();i.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},i.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},i.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},i.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},i.MIXED={bit:-1},i.getCharCountIndicator=function(n,s){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!r.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?n.ccBits[0]:s<27?n.ccBits[1]:n.ccBits[2]},i.getBestModeForData=function(n){return o.testNumeric(n)?i.NUMERIC:o.testAlphanumeric(n)?i.ALPHANUMERIC:o.testKanji(n)?i.KANJI:i.BYTE},i.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")},i.isValid=function(n){return n&&n.bit&&n.ccBits};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return i.NUMERIC;case"alphanumeric":return i.ALPHANUMERIC;case"kanji":return i.KANJI;case"byte":return i.BYTE;default:throw new Error("Unknown mode: "+t)}}i.from=function(n,s){if(i.isValid(n))return n;try{return e(n)}catch{return s}}})(dt)),dt}var Qt;function Ie(){return Qt||(Qt=1,(function(i){const r=F(),o=ae(),e=Bt(),t=U(),n=ce(),s=7973,c=r.getBCHDigit(s);function a(w,f,l){for(let v=1;v<=40;v++)if(f<=i.getCapacity(v,l,w))return v}function d(w,f){return t.getCharCountIndicator(w,f)+4}function h(w,f){let l=0;return w.forEach(function(v){const P=d(v.mode,f);l+=P+v.getBitsLength()}),l}function x(w,f){for(let l=1;l<=40;l++)if(h(w,l)<=i.getCapacity(l,f,t.MIXED))return l}i.from=function(f,l){return n.isValid(f)?parseInt(f,10):l},i.getCapacity=function(f,l,v){if(!n.isValid(f))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=t.BYTE);const P=r.getSymbolTotalCodewords(f),R=o.getTotalCodewordsCount(f,l),M=(P-R)*8;if(v===t.MIXED)return M;const j=M-d(v,f);switch(v){case t.NUMERIC:return Math.floor(j/10*3);case t.ALPHANUMERIC:return Math.floor(j/11*2);case t.KANJI:return Math.floor(j/13);case t.BYTE:default:return Math.floor(j/8)}},i.getBestVersionForData=function(f,l){let v;const P=e.from(l,e.M);if(Array.isArray(f)){if(f.length>1)return x(f,P);if(f.length===0)return 1;v=f[0]}else v=f;return a(v.mode,v.getLength(),P)},i.getEncodedBits=function(f){if(!n.isValid(f)||f<7)throw new Error("Invalid QR Code version");let l=f<<12;for(;r.getBCHDigit(l)-c>=0;)l^=s<<r.getBCHDigit(l)-c;return f<<12|l}})(lt)),lt}var ht={},$t;function Le(){if($t)return ht;$t=1;const i=F(),r=1335,o=21522,e=i.getBCHDigit(r);return ht.getEncodedBits=function(n,s){const c=n.bit<<3|s;let a=c<<10;for(;i.getBCHDigit(a)-e>=0;)a^=r<<i.getBCHDigit(a)-e;return(c<<10|a)^o},ht}var gt={},mt,Gt;function qe(){if(Gt)return mt;Gt=1;const i=U();function r(o){this.mode=i.NUMERIC,this.data=o.toString()}return r.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let t,n,s;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),s=parseInt(n,10),e.put(s,10);const c=this.data.length-t;c>0&&(n=this.data.substr(t),s=parseInt(n,10),e.put(s,c*3+1))},mt=r,mt}var wt,Wt;function De(){if(Wt)return wt;Wt=1;const i=U(),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(e){this.mode=i.ALPHANUMERIC,this.data=e}return o.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let s=r.indexOf(this.data[n])*45;s+=r.indexOf(this.data[n+1]),t.put(s,11)}this.data.length%2&&t.put(r.indexOf(this.data[n]),6)},wt=o,wt}var pt,Zt;function Fe(){if(Zt)return pt;Zt=1;const i=U();function r(o){this.mode=i.BYTE,typeof o=="string"?this.data=new TextEncoder().encode(o):this.data=new Uint8Array(o)}return r.getBitsLength=function(e){return e*8},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(o){for(let e=0,t=this.data.length;e<t;e++)o.put(this.data[e],8)},pt=r,pt}var yt,Xt;function Ue(){if(Xt)return yt;Xt=1;const i=U(),r=F();function o(e){this.mode=i.KANJI,this.data=e}return o.getBitsLength=function(t){return t*13},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=r.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}},yt=o,yt}var Ct={exports:{}},te;function ke(){return te||(te=1,(function(i){var r={single_source_shortest_paths:function(o,e,t){var n={},s={};s[e]=0;var c=r.PriorityQueue.make();c.push(e,0);for(var a,d,h,x,w,f,l,v,P;!c.empty();){a=c.pop(),d=a.value,x=a.cost,w=o[d]||{};for(h in w)w.hasOwnProperty(h)&&(f=w[h],l=x+f,v=s[h],P=typeof s[h]>"u",(P||v>l)&&(s[h]=l,c.push(h,l),n[h]=d))}if(typeof t<"u"&&typeof s[t]>"u"){var R=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(R)}return n},extract_shortest_path_from_predecessor_list:function(o,e){for(var t=[],n=e;n;)t.push(n),o[n],n=o[n];return t.reverse(),t},find_path:function(o,e,t){var n=r.single_source_shortest_paths(o,e,t);return r.extract_shortest_path_from_predecessor_list(n,t)},PriorityQueue:{make:function(o){var e=r.PriorityQueue,t={},n;o=o||{};for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t.queue=[],t.sorter=o.sorter||e.default_sorter,t},default_sorter:function(o,e){return o.cost-e.cost},push:function(o,e){var t={value:o,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};i.exports=r})(Ct)),Ct.exports}var ee;function _e(){return ee||(ee=1,(function(i){const r=U(),o=qe(),e=De(),t=Fe(),n=Ue(),s=ue(),c=F(),a=ke();function d(R){return unescape(encodeURIComponent(R)).length}function h(R,M,j){const B=[];let T;for(;(T=R.exec(j))!==null;)B.push({data:T[0],index:T.index,mode:M,length:T[0].length});return B}function x(R){const M=h(s.NUMERIC,r.NUMERIC,R),j=h(s.ALPHANUMERIC,r.ALPHANUMERIC,R);let B,T;return c.isKanjiModeEnabled()?(B=h(s.BYTE,r.BYTE,R),T=h(s.KANJI,r.KANJI,R)):(B=h(s.BYTE_KANJI,r.BYTE,R),T=[]),M.concat(j,B,T).sort(function(E,C){return E.index-C.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function w(R,M){switch(M){case r.NUMERIC:return o.getBitsLength(R);case r.ALPHANUMERIC:return e.getBitsLength(R);case r.KANJI:return n.getBitsLength(R);case r.BYTE:return t.getBitsLength(R)}}function f(R){return R.reduce(function(M,j){const B=M.length-1>=0?M[M.length-1]:null;return B&&B.mode===j.mode?(M[M.length-1].data+=j.data,M):(M.push(j),M)},[])}function l(R){const M=[];for(let j=0;j<R.length;j++){const B=R[j];switch(B.mode){case r.NUMERIC:M.push([B,{data:B.data,mode:r.ALPHANUMERIC,length:B.length},{data:B.data,mode:r.BYTE,length:B.length}]);break;case r.ALPHANUMERIC:M.push([B,{data:B.data,mode:r.BYTE,length:B.length}]);break;case r.KANJI:M.push([B,{data:B.data,mode:r.BYTE,length:d(B.data)}]);break;case r.BYTE:M.push([{data:B.data,mode:r.BYTE,length:d(B.data)}])}}return M}function v(R,M){const j={},B={start:{}};let T=["start"];for(let m=0;m<R.length;m++){const E=R[m],C=[];for(let g=0;g<E.length;g++){const b=E[g],p=""+m+g;C.push(p),j[p]={node:b,lastCount:0},B[p]={};for(let N=0;N<T.length;N++){const y=T[N];j[y]&&j[y].node.mode===b.mode?(B[y][p]=w(j[y].lastCount+b.length,b.mode)-w(j[y].lastCount,b.mode),j[y].lastCount+=b.length):(j[y]&&(j[y].lastCount=b.length),B[y][p]=w(b.length,b.mode)+4+r.getCharCountIndicator(b.mode,M))}}T=C}for(let m=0;m<T.length;m++)B[T[m]].end=0;return{map:B,table:j}}function P(R,M){let j;const B=r.getBestModeForData(R);if(j=r.from(M,B),j!==r.BYTE&&j.bit<B.bit)throw new Error('"'+R+'" cannot be encoded with mode '+r.toString(j)+`.
 Suggested mode is: `+r.toString(B));switch(j===r.KANJI&&!c.isKanjiModeEnabled()&&(j=r.BYTE),j){case r.NUMERIC:return new o(R);case r.ALPHANUMERIC:return new e(R);case r.KANJI:return new n(R);case r.BYTE:return new t(R)}}i.fromArray=function(M){return M.reduce(function(j,B){return typeof B=="string"?j.push(P(B,null)):B.data&&j.push(P(B.data,B.mode)),j},[])},i.fromString=function(M,j){const B=x(M,c.isKanjiModeEnabled()),T=l(B),m=v(T,j),E=a.find_path(m.map,"start","end"),C=[];for(let g=1;g<E.length-1;g++)C.push(m.table[E[g]].node);return i.fromArray(f(C))},i.rawSplit=function(M){return i.fromArray(x(M,c.isKanjiModeEnabled()))}})(gt)),gt}var ne;function ze(){if(ne)return et;ne=1;const i=F(),r=Bt(),o=ve(),e=Re(),t=je(),n=Ae(),s=Me(),c=ae(),a=Se(),d=Ie(),h=Le(),x=U(),w=_e();function f(m,E){const C=m.size,g=n.getPositions(E);for(let b=0;b<g.length;b++){const p=g[b][0],N=g[b][1];for(let y=-1;y<=7;y++)if(!(p+y<=-1||C<=p+y))for(let A=-1;A<=7;A++)N+A<=-1||C<=N+A||(y>=0&&y<=6&&(A===0||A===6)||A>=0&&A<=6&&(y===0||y===6)||y>=2&&y<=4&&A>=2&&A<=4?m.set(p+y,N+A,!0,!0):m.set(p+y,N+A,!1,!0))}}function l(m){const E=m.size;for(let C=8;C<E-8;C++){const g=C%2===0;m.set(C,6,g,!0),m.set(6,C,g,!0)}}function v(m,E){const C=t.getPositions(E);for(let g=0;g<C.length;g++){const b=C[g][0],p=C[g][1];for(let N=-2;N<=2;N++)for(let y=-2;y<=2;y++)N===-2||N===2||y===-2||y===2||N===0&&y===0?m.set(b+N,p+y,!0,!0):m.set(b+N,p+y,!1,!0)}}function P(m,E){const C=m.size,g=d.getEncodedBits(E);let b,p,N;for(let y=0;y<18;y++)b=Math.floor(y/3),p=y%3+C-8-3,N=(g>>y&1)===1,m.set(b,p,N,!0),m.set(p,b,N,!0)}function R(m,E,C){const g=m.size,b=h.getEncodedBits(E,C);let p,N;for(p=0;p<15;p++)N=(b>>p&1)===1,p<6?m.set(p,8,N,!0):p<8?m.set(p+1,8,N,!0):m.set(g-15+p,8,N,!0),p<8?m.set(8,g-p-1,N,!0):p<9?m.set(8,15-p-1+1,N,!0):m.set(8,15-p-1,N,!0);m.set(g-8,8,1,!0)}function M(m,E){const C=m.size;let g=-1,b=C-1,p=7,N=0;for(let y=C-1;y>0;y-=2)for(y===6&&y--;;){for(let A=0;A<2;A++)if(!m.isReserved(b,y-A)){let q=!1;N<E.length&&(q=(E[N]>>>p&1)===1),m.set(b,y-A,q),p--,p===-1&&(N++,p=7)}if(b+=g,b<0||C<=b){b-=g,g=-g;break}}}function j(m,E,C){const g=new o;C.forEach(function(A){g.put(A.mode.bit,4),g.put(A.getLength(),x.getCharCountIndicator(A.mode,m)),A.write(g)});const b=i.getSymbolTotalCodewords(m),p=c.getTotalCodewordsCount(m,E),N=(b-p)*8;for(g.getLengthInBits()+4<=N&&g.put(0,4);g.getLengthInBits()%8!==0;)g.putBit(0);const y=(N-g.getLengthInBits())/8;for(let A=0;A<y;A++)g.put(A%2?17:236,8);return B(g,m,E)}function B(m,E,C){const g=i.getSymbolTotalCodewords(E),b=c.getTotalCodewordsCount(E,C),p=g-b,N=c.getBlocksCount(E,C),y=g%N,A=N-y,q=Math.floor(g/N),V=Math.floor(p/N),de=V+1,bt=q-V,fe=new a(bt);let G=0;const H=new Array(N),vt=new Array(N);let W=0;const he=new Uint8Array(m.buffer);for(let k=0;k<N;k++){const X=k<A?V:de;H[k]=he.slice(G,G+X),vt[k]=fe.encode(H[k]),G+=X,W=Math.max(W,X)}const Z=new Uint8Array(g);let Rt=0,I,L;for(I=0;I<W;I++)for(L=0;L<N;L++)I<H[L].length&&(Z[Rt++]=H[L][I]);for(I=0;I<bt;I++)for(L=0;L<N;L++)Z[Rt++]=vt[L][I];return Z}function T(m,E,C,g){let b;if(Array.isArray(m))b=w.fromArray(m);else if(typeof m=="string"){let q=E;if(!q){const V=w.rawSplit(m);q=d.getBestVersionForData(V,C)}b=w.fromString(m,q||40)}else throw new Error("Invalid data");const p=d.getBestVersionForData(b,C);if(!p)throw new Error("The amount of data is too big to be stored in a QR Code");if(!E)E=p;else if(E<p)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+p+`.
`);const N=j(E,C,b),y=i.getSymbolSize(E),A=new e(y);return f(A,E),l(A),v(A,E),R(A,C,0),E>=7&&P(A,E),M(A,N),isNaN(g)&&(g=s.getBestMask(A,R.bind(null,A,C))),s.applyMask(g,A),R(A,C,g),{modules:A,version:E,errorCorrectionLevel:C,maskPattern:g,segments:b}}return et.create=function(E,C){if(typeof E>"u"||E==="")throw new Error("No input text");let g=r.M,b,p;return typeof C<"u"&&(g=r.from(C.errorCorrectionLevel,r.M),b=d.from(C.version),p=s.from(C.maskPattern),C.toSJISFunc&&i.setToSJISFunction(C.toSJISFunc)),T(E,b,g,p)},et}var Et={},Nt={},re;function le(){return re||(re=1,(function(i){function r(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let e=o.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+o);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(n){return[n,n]}))),e.length===6&&e.push("F","F");const t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}i.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,s=e.scale||4;return{width:n,scale:n?4:s,margin:t,color:{dark:r(e.color.dark||"#000000ff"),light:r(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},i.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale},i.getImageWidth=function(e,t){const n=i.getScale(e,t);return Math.floor((e+t.margin*2)*n)},i.qrToImageData=function(e,t,n){const s=t.modules.size,c=t.modules.data,a=i.getScale(s,n),d=Math.floor((s+n.margin*2)*a),h=n.margin*a,x=[n.color.light,n.color.dark];for(let w=0;w<d;w++)for(let f=0;f<d;f++){let l=(w*d+f)*4,v=n.color.light;if(w>=h&&f>=h&&w<d-h&&f<d-h){const P=Math.floor((w-h)/a),R=Math.floor((f-h)/a);v=x[c[P*s+R]?1:0]}e[l++]=v.r,e[l++]=v.g,e[l++]=v.b,e[l]=v.a}}})(Nt)),Nt}var ie;function Ve(){return ie||(ie=1,(function(i){const r=le();function o(t,n,s){t.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=s,n.width=s,n.style.height=s+"px",n.style.width=s+"px"}function e(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}i.render=function(n,s,c){let a=c,d=s;typeof a>"u"&&(!s||!s.getContext)&&(a=s,s=void 0),s||(d=e()),a=r.getOptions(a);const h=r.getImageWidth(n.modules.size,a),x=d.getContext("2d"),w=x.createImageData(h,h);return r.qrToImageData(w.data,n,a),o(x,d,h),x.putImageData(w,0,0),d},i.renderToDataURL=function(n,s,c){let a=c;typeof a>"u"&&(!s||!s.getContext)&&(a=s,s=void 0),a||(a={});const d=i.render(n,s,a),h=a.type||"image/png",x=a.rendererOpts||{};return d.toDataURL(h,x.quality)}})(Et)),Et}var xt={},oe;function Ke(){if(oe)return xt;oe=1;const i=le();function r(t,n){const s=t.a/255,c=n+'="'+t.hex+'"';return s<1?c+" "+n+'-opacity="'+s.toFixed(2).slice(1)+'"':c}function o(t,n,s){let c=t+n;return typeof s<"u"&&(c+=" "+s),c}function e(t,n,s){let c="",a=0,d=!1,h=0;for(let x=0;x<t.length;x++){const w=Math.floor(x%n),f=Math.floor(x/n);!w&&!d&&(d=!0),t[x]?(h++,x>0&&w>0&&t[x-1]||(c+=d?o("M",w+s,.5+f+s):o("m",a,0),a=0,d=!1),w+1<n&&t[x+1]||(c+=o("h",h),h=0)):a++}return c}return xt.render=function(n,s,c){const a=i.getOptions(s),d=n.modules.size,h=n.modules.data,x=d+a.margin*2,w=a.color.light.a?"<path "+r(a.color.light,"fill")+' d="M0 0h'+x+"v"+x+'H0z"/>':"",f="<path "+r(a.color.dark,"stroke")+' d="'+e(h,d,a.margin)+'"/>',l='viewBox="0 0 '+x+" "+x+'"',P='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+l+' shape-rendering="crispEdges">'+w+f+`</svg>
`;return typeof c=="function"&&c(null,P),P},xt}var se;function He(){if(se)return z;se=1;const i=be(),r=ze(),o=Ve(),e=Ke();function t(n,s,c,a,d){const h=[].slice.call(arguments,1),x=h.length,w=typeof h[x-1]=="function";if(!w&&!i())throw new Error("Callback required as last argument");if(w){if(x<2)throw new Error("Too few arguments provided");x===2?(d=c,c=s,s=a=void 0):x===3&&(s.getContext&&typeof d>"u"?(d=a,a=void 0):(d=a,a=c,c=s,s=void 0))}else{if(x<1)throw new Error("Too few arguments provided");return x===1?(c=s,s=a=void 0):x===2&&!s.getContext&&(a=c,c=s,s=void 0),new Promise(function(f,l){try{const v=r.create(c,a);f(n(v,s,a))}catch(v){l(v)}})}try{const f=r.create(c,a);d(null,n(f,s,a))}catch(f){d(f)}}return z.create=r.create,z.toCanvas=t.bind(null,o.render),z.toDataURL=t.bind(null,o.renderToDataURL),z.toString=t.bind(null,function(n,s,c){return e.render(n,c)}),z}var Je=He();const Oe=ge(Je);function cn(){const{toast:i}=me(),[,r]=we(),o=pe(),[e,t]=J.useState(null),[n,s]=J.useState(""),{data:c,isLoading:a,error:d}=jt({queryKey:["/api/auth/me"],retry:!1}),{data:h,isLoading:x}=jt({queryKey:["/api/events"],enabled:!!c,retry:!1}),w=At({mutationFn:async()=>{const l=await fetch("/api/auth/logout",{method:"POST",credentials:"include"});if(!l.ok)throw new Error("Logout failed");return l.json()},onSuccess:()=>{o.clear(),i({title:"Logged out",description:"You have been successfully logged out."}),r("/login")}}),f=At({mutationFn:async l=>{const v=await fetch(`/api/events/${l}/start`,{method:"POST",credentials:"include"});if(!v.ok){const P=await v.json();throw new Error(P.error||"Failed to start event")}return v.json()},onSuccess:l=>{o.invalidateQueries({queryKey:["/api/events"]}),i({title:"Event Started!",description:`${l.title} is now live and accepting participants.`})},onError:l=>{i({title:"Failed to start event",description:l.message,variant:"destructive"})}});return J.useEffect(()=>{if(e){const l=`${window.location.origin}/join/${e.qrCode}`;Oe.toDataURL(l,{width:300,margin:2,color:{dark:"#7C2D12",light:"#FFFFFF"}}).then(s)}},[e]),J.useEffect(()=>{(d||!a&&!c)&&r("/login")},[d,a,c,r]),a?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 wine-gradient rounded-2xl flex items-center justify-center mx-auto mb-4",children:u.jsx(Q,{className:"text-champagne-400 h-8 w-8 animate-pulse"})}),u.jsx("p",{className:"text-wine-700",children:"Loading..."})]})}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50",children:[u.jsx("div",{className:"wine-gradient shadow-lg",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm border border-white/30 mr-4",children:u.jsx(Q,{className:"text-champagne-400 h-6 w-6"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-white","data-testid":"text-page-title",children:"Event Management"}),u.jsxs("p",{className:"text-champagne-200","data-testid":"text-welcome",children:["Welcome back, ",c?.user.fullName]})]})]}),u.jsxs(_,{variant:"ghost",onClick:()=>w.mutate(),className:"text-white hover:bg-white/10","data-testid":"button-logout",children:[u.jsx(Ce,{className:"mr-2 h-4 w-4"}),"Logout"]})]})})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2",children:u.jsxs(O,{className:"trivia-card","data-testid":"card-events-list",children:[u.jsx(Mt,{children:u.jsxs(Pt,{className:"flex items-center wine-text",children:[u.jsx(Tt,{className:"mr-2 h-5 w-5"}),"Your Events"]})}),u.jsx(Y,{children:x?u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-gray-600",children:"Loading events..."})}):h&&h.length>0?u.jsx("div",{className:"space-y-4",children:h.map(l=>u.jsx(O,{className:`cursor-pointer transition-all hover:shadow-md ${e?.id===l.id?"ring-2 ring-wine-500 bg-wine-50":""}`,onClick:()=>t(l),"data-testid":`event-card-${l.id}`,children:u.jsxs(Y,{className:"p-4",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsx("div",{className:"flex-1",children:u.jsx("h3",{className:"font-semibold text-wine-800 text-lg","data-testid":`text-event-title-${l.id}`,children:l.title})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ye,{variant:l.status==="active"?"default":"secondary",className:l.status==="active"?"bg-emerald-100 text-emerald-800":"","data-testid":`badge-status-${l.id}`,children:l.status}),u.jsx(_,{size:"sm",variant:"outline",onClick:v=>{v.stopPropagation(),r(`/events/${l.id}/manage`)},className:"text-xs","data-testid":`button-manage-${l.id}`,children:"Manage"})]})]}),u.jsx("p",{className:"text-gray-600 text-sm mb-3","data-testid":`text-event-description-${l.id}`,children:l.description}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-500",children:[l.eventTime&&u.jsxs("div",{className:"flex items-center",children:[u.jsx(Tt,{className:"mr-1 h-3 w-3"}),l.eventTime]}),l.location&&u.jsxs("div",{className:"flex items-center",children:[u.jsx(Ee,{className:"mr-1 h-3 w-3"}),l.location]}),l.sponsoringOrganization&&u.jsxs("div",{className:"flex items-center",children:[u.jsx(Ne,{className:"mr-1 h-3 w-3"}),l.sponsoringOrganization]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(St,{className:"mr-1 h-3 w-3"}),"Max ",l.maxParticipants," participants"]})]})]})},l.id))}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(Q,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"No events found"}),u.jsx(_,{onClick:()=>r("/dashboard"),"data-testid":"button-create-event",children:"Create Your First Event"})]})})]})}),u.jsx("div",{children:e?u.jsxs("div",{className:"space-y-6",children:[u.jsxs(O,{className:"trivia-card","data-testid":"card-event-details",children:[u.jsx(Mt,{children:u.jsx(Pt,{className:"wine-text text-lg",children:e.title})}),u.jsx(Y,{children:u.jsxs("div",{className:"space-y-4",children:[e.status!=="active"&&u.jsx(_,{onClick:()=>f.mutate(e.id),disabled:f.isPending,className:"w-full trivia-button-primary","data-testid":"button-start-event",children:f.isPending?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Starting..."]}):u.jsxs(u.Fragment,{children:[u.jsx(xe,{className:"mr-2 h-4 w-4"}),"Start Event"]})}),e.status==="active"&&u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-full max-w-sm mx-auto",children:n&&u.jsx("img",{src:n,alt:"Join Event QR Code",className:"w-full h-auto rounded-lg shadow-md","data-testid":"image-qr-code"})}),u.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Join Code:"}),u.jsx("p",{className:"text-lg font-mono text-wine-800","data-testid":"text-join-code",children:e.qrCode})]}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Participants can scan the QR code or visit:",u.jsx("br",{}),u.jsxs("span",{className:"font-mono text-wine-800",children:["/join/",e.qrCode]})]})]})]})})]}),e.status==="active"&&u.jsxs(_,{onClick:()=>r(`/event/${e.id}`),className:"w-full trivia-button-secondary","data-testid":"button-manage-event",children:[u.jsx(St,{className:"mr-2 h-4 w-4"}),"Manage Event"]})]}):u.jsx(O,{className:"trivia-card","data-testid":"card-select-event",children:u.jsxs(Y,{className:"text-center py-12",children:[u.jsx(Be,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Select an event to view QR code and controls"})]})})})]}),u.jsx("div",{className:"mt-8 text-center",children:u.jsxs(_,{variant:"outline",onClick:()=>r("/dashboard"),className:"border-wine-200 text-wine-700 hover:bg-wine-50","data-testid":"button-dashboard",children:[u.jsx(Q,{className:"mr-2 h-4 w-4"}),"Go to Dashboard"]})})]})]})}export{cn as default};
