import{b as U,r as x,j as e}from"./index-B_pBohjf.js";import{C as y,a as H,b as J,c as k}from"./card-liGqqtMa.js";import{B as q}from"./badge-6zvk_0JI.js";import{B as i}from"./button-W1ihvLmW.js";import{u as S}from"./useQuery-BYyIekjr.js";import{P as f}from"./play-T6hqZYTK.js";import{S as E}from"./star-DuSMv8ef.js";import{T as V}from"./trophy-Crjp96K2.js";import{R as T,C as W}from"./rotate-ccw-ChhaJVr_.js";import{P as X}from"./pause-Ya66B7be.js";import{S as Y}from"./skip-forward-CJJ_yCfd.js";import"./utils-km2FGkQ4.js";import"./createLucideIcon-DivzmlIR.js";const L=({value:v,className:d})=>e.jsx("div",{className:`w-full bg-gray-200 rounded-full h-2 ${d}`,children:e.jsx("div",{className:"bg-champagne-400 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,v))}%`}})});function oe({defaultEventId:v}={}){const[,d]=U("/presenter-demo/:id"),m=(d==null?void 0:d.id)||v,[l,h]=x.useState("waiting"),[r,C]=x.useState(0),[P,b]=x.useState(!1),[a,p]=x.useState(30),[u,c]=x.useState(!1),[j,I]=x.useState(!0),{data:w,isLoading:Q,error:R}=S({queryKey:["/api/events",m],enabled:!!m,retry:3,retryDelay:1e3}),{data:t,isLoading:$,error:z}=S({queryKey:["/api/events",m,"questions"],enabled:!!m,retry:3,retryDelay:1e3}),{data:o,isLoading:B,error:K}=S({queryKey:["/api/events",m,"fun-facts"],enabled:!!m,retry:3,retryDelay:1e3}),s=t==null?void 0:t[r],M=t?(r+1)/t.length*100:0,O=a/30*100,A=()=>{h("question"),p(30),c(!0),b(!1)},N=x.useCallback(()=>{b(!0),h("answer"),c(!1)},[]);x.useEffect(()=>{let n;return u&&a>0&&(n=setInterval(()=>{p(g=>g<=1?(c(!1),j&&l==="question"&&setTimeout(()=>N(),500),0):g-1)},1e3)),()=>clearInterval(n)},[u,a,j,l,N]);const D=()=>{t&&r<t.length-1?(C(r+1),b(!1),h("question"),p(30),c(!0)):(h("complete"),c(!1))},F=()=>{C(0),b(!1),h("waiting"),p(30),c(!1)},G=()=>{l==="question"?N():l==="answer"&&D()};return Q||$||B||!w||!t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-900 to-champagne-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-champagne-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-spin",children:e.jsx(f,{className:"h-8 w-8 text-champagne-900"})}),e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Demo Presenter"}),e.jsx("p",{className:"text-xl",children:"Loading trivia preview..."}),R&&e.jsx("p",{className:"text-red-400 mt-2",children:"Error loading event data"}),z&&e.jsx("p",{className:"text-red-400 mt-2",children:"Error loading questions"}),K&&e.jsx("p",{className:"text-red-400 mt-2",children:"Error loading fun facts"})]})}):e.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-wine-900 to-champagne-900 text-white overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 p-4 lg:p-6 border-b border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(q,{variant:"outline",className:"bg-champagne-500/20 border-champagne-400 text-champagne-200",children:"✨ DEMO"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-champagne-200 truncate",children:(w==null?void 0:w.title)||"Demo Event"})]}),e.jsx("p",{className:"text-xs sm:text-sm lg:text-lg text-white/80 truncate",children:"TriviaSpark Preview • Shareable Demo • No Login Required"})]}),e.jsx("div",{className:"flex items-center space-x-4 flex-shrink-0",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg lg:text-xl font-bold text-champagne-300",children:(t==null?void 0:t.length)||0}),e.jsx("div",{className:"text-xs sm:text-sm text-white/60",children:"Questions"})]})})]}),e.jsxs("div",{className:"mt-3 lg:mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs sm:text-sm text-white/60",children:"Progress"}),e.jsxs("span",{className:"text-xs sm:text-sm text-champagne-300",children:["Question ",r+1," of ",(t==null?void 0:t.length)||0]})]}),e.jsx(L,{value:M,className:"bg-white/20"})]})]}),e.jsxs("div",{className:"flex-1 flex items-center justify-center p-4 lg:p-6 overflow-hidden",children:[l==="waiting"&&e.jsxs("div",{className:"text-center max-w-4xl",children:[e.jsx("div",{className:"w-20 h-20 lg:w-24 lg:h-24 bg-champagne-500 rounded-full flex items-center justify-center mx-auto mb-6 lg:mb-8",children:e.jsx(f,{className:"h-10 w-10 lg:h-12 lg:w-12 text-champagne-900"})}),e.jsx("h2",{className:"text-4xl lg:text-6xl xl:text-7xl font-bold mb-4 text-champagne-200",children:"TriviaSpark Demo"}),e.jsx("p",{className:"text-lg lg:text-2xl xl:text-3xl text-white/80 mb-4",children:"Experience our interactive trivia platform"}),e.jsx("p",{className:"text-sm lg:text-lg text-champagne-300 mb-8",children:"This is a shareable demo - no login required!"}),e.jsxs(i,{onClick:A,size:"lg",className:"bg-champagne-500 hover:bg-champagne-400 text-champagne-900 font-bold text-xl px-8 py-4",children:[e.jsx(f,{className:"mr-2 h-6 w-6"}),"Start Demo"]})]}),l==="question"&&s&&e.jsx("div",{className:"w-full max-w-7xl h-full flex flex-col",children:e.jsxs(y,{className:"bg-white/10 backdrop-blur-sm border-white/20 text-white flex-1 flex flex-col relative overflow-hidden",children:[s.backgroundImageUrl&&e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${s.backgroundImageUrl})`},children:e.jsx("div",{className:"absolute inset-0 bg-black/75"})}),e.jsx(H,{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(J,{className:"text-xl lg:text-3xl text-white drop-shadow-lg",children:["Question ",r+1]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-4xl font-bold ${a<=10?"text-red-400 animate-pulse":a<=20?"text-yellow-400":"text-green-400"}`,children:[a,"s"]}),e.jsx("div",{className:"w-24",children:e.jsx(L,{value:O,className:`${a<=10?"bg-red-200":a<=20?"bg-yellow-200":"bg-green-200"}`})})]}),e.jsx(q,{variant:"secondary",className:"bg-champagne-200 text-champagne-900 text-lg px-4 py-2",children:s.difficulty})]})]})}),e.jsx(k,{className:"flex-1 flex flex-col justify-center relative z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-black/80 backdrop-blur-sm rounded-xl p-4 lg:p-6 mb-4 lg:mb-8 border border-white/20",children:e.jsx("h3",{className:`font-bold leading-tight text-white ${s.question.length>120?"text-lg lg:text-2xl xl:text-3xl":s.question.length>80?"text-xl lg:text-3xl xl:text-4xl":"text-2xl lg:text-4xl xl:text-5xl"}`,children:s.question})}),s.options&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 lg:gap-6 max-w-6xl mx-auto",children:s.options.map((n,g)=>e.jsx("div",{className:`p-3 lg:p-6 rounded-lg border-2 ${P&&n===s.correctAnswer?"bg-green-600 border-green-400 text-white shadow-lg":"bg-gray-800 border-gray-600 hover:bg-gray-700 text-white"} transition-all duration-300`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-champagne-200 text-champagne-900 font-bold flex items-center justify-center mr-4",children:String.fromCharCode(65+g)}),e.jsx("span",{className:"text-base lg:text-xl font-medium text-white",children:n})]})},g))})]})})]})}),l==="answer"&&s&&e.jsxs("div",{className:"w-full max-w-7xl h-full flex flex-col space-y-4 lg:space-y-8",children:[e.jsx(y,{className:"bg-white/10 backdrop-blur-sm border-white/20 text-white",children:e.jsxs(k,{className:"py-6 lg:py-8 h-full flex flex-col justify-center",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 lg:gap-8 h-full",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-green-500 rounded-full flex items-center justify-center mb-3 lg:mb-4",children:e.jsx(E,{className:"h-8 w-8 lg:h-10 lg:w-10 text-white"})}),e.jsx("h3",{className:"text-xl lg:text-2xl xl:text-3xl font-bold text-green-300",children:"Correct Answer"})]}),e.jsx("div",{className:"flex items-center justify-center text-center",children:e.jsx("p",{className:"text-xl lg:text-3xl xl:text-4xl font-bold text-white",children:s.correctAnswer})})]}),s.explanation&&e.jsx("div",{className:"mt-4 lg:mt-6 text-center",children:e.jsx("p",{className:"text-sm lg:text-lg text-white/80 max-w-4xl mx-auto leading-relaxed",children:s.explanation})})]})}),o&&o.length>0&&e.jsx(y,{className:"bg-champagne-600/20 backdrop-blur-sm border-champagne-400/30 text-white flex-1",children:e.jsxs(k,{className:"text-center py-4 lg:py-8 h-full flex flex-col justify-center",children:[e.jsx("div",{className:"w-12 h-12 lg:w-16 lg:h-16 bg-champagne-500 rounded-full flex items-center justify-center mx-auto mb-2 lg:mb-4",children:e.jsx(E,{className:"h-6 w-6 lg:h-8 lg:w-8 text-champagne-900"})}),e.jsx("h4",{className:"text-lg lg:text-2xl font-bold mb-2 lg:mb-4 text-champagne-200",children:"Fun Fact!"}),o&&o.length>0&&(()=>{const n=o[r%o.length];return n?e.jsxs("div",{children:[e.jsx("h5",{className:"text-base lg:text-xl font-semibold mb-2 lg:mb-3 text-champagne-100",children:n.title}),e.jsx("p",{className:"text-sm lg:text-lg text-white/90 max-w-5xl mx-auto leading-relaxed",children:n.content})]}):null})()]})})]}),l==="complete"&&e.jsxs("div",{className:"text-center max-w-4xl",children:[e.jsx("div",{className:"w-20 h-20 lg:w-24 lg:h-24 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6 lg:mb-8",children:e.jsx(V,{className:"h-10 w-10 lg:h-12 lg:w-12 text-yellow-900"})}),e.jsx("h2",{className:"text-4xl lg:text-6xl xl:text-7xl font-bold mb-4 text-champagne-200",children:"Demo Complete!"}),e.jsx("p",{className:"text-lg lg:text-2xl xl:text-3xl text-white/80 mb-4",children:"Experience the full power of TriviaSpark for your events"}),e.jsx("p",{className:"text-sm lg:text-lg text-champagne-300 mb-8",children:"Create engaging trivia experiences with real-time scoring, team management, and more!"}),e.jsxs(i,{onClick:F,size:"lg",className:"bg-champagne-500 hover:bg-champagne-400 text-champagne-900 font-bold text-xl px-8 py-4",children:[e.jsx(T,{className:"mr-2 h-6 w-6"}),"Restart Demo"]})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/90 backdrop-blur-sm border-t border-white/20 p-2 lg:p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-center space-x-2 lg:space-x-4",children:[l==="waiting"&&e.jsx(e.Fragment,{children:e.jsxs(i,{onClick:A,className:"bg-green-600 hover:bg-green-700 text-white px-4 lg:px-8 py-2 lg:py-4 text-base lg:text-lg font-semibold",children:[e.jsx(f,{className:"mr-2 h-5 w-5"}),"Start Demo"]})}),l==="question"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:`text-2xl font-bold ${a<=10?"text-red-400":a<=20?"text-yellow-400":"text-white"}`,children:["Time: ",a,"s"]}),e.jsx(i,{onClick:()=>c(!u),className:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700 border",children:u?e.jsx(X,{className:"h-4 w-4"}):e.jsx(f,{className:"h-4 w-4"})})]}),e.jsx(i,{onClick:N,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 text-lg",children:"Show Answer"}),e.jsxs(i,{onClick:G,className:"bg-champagne-600 hover:bg-champagne-700 text-white px-6 py-3",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Skip"]})]}),l==="answer"&&e.jsxs(e.Fragment,{children:[e.jsxs(i,{onClick:D,className:"bg-green-600 hover:bg-green-700 text-white px-8 py-4 text-lg font-semibold",disabled:!t||r>=t.length-1,children:[e.jsx(W,{className:"mr-2 h-5 w-5"}),t&&r>=t.length-1?"Finish Demo":"Next Question"]}),e.jsx(i,{onClick:()=>I(!j),size:"sm",className:"bg-champagne-700 hover:bg-champagne-600 text-white border border-champagne-500",children:j?"Auto: ON":"Auto: OFF"})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-8",children:e.jsx(i,{onClick:F,size:"sm",className:"bg-red-700 hover:bg-red-600 text-white border border-red-500",children:e.jsx(T,{className:"h-4 w-4"})})})]})})]})}export{oe as default};
